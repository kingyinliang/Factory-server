webpackJsonp([24,80],{"2Tej":function(e,t){},Of4i:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("P9l9"),o={name:"SpecificationAddOrUpdate",data:function(){return{visible:!1,SpecificationId:"",largeClass:[],Unit:[],dataForm:{material:"",brand:"",largeClass:"",boxSpec:"",boxSpecUnit:"",productSpec:"",productSpecUnit:""},dataRule:{material:[{required:!0,message:"物料不能为空",trigger:"blur"}],brand:[{required:!0,message:"品牌不能为空",trigger:"blur"}],largeClass:[{required:!0,message:"大类不能为空",trigger:"blur"}],boxSpec:[{required:!0,message:"箱规格不能为空",trigger:"blur"}],boxSpecUnit:[{required:!0,message:"箱规格单位不能为空",trigger:"blur"}]}}},props:{SerchSapList:{}},mounted:function(){this.GetLargeClass(),this.GetUnit()},methods:{setBrand:function(e){this.dataForm.brand=e.split(" ")[2]},GetLargeClass:function(){var e=this;this.$http(i.k.PARAMETERLIST_API+"?type=category","POST").then(function(t){var a=t.data;0===a.code?e.largeClass=a.dicList:e.$message.error(a.msg)})},GetUnit:function(){var e=this;this.$http(i.k.PARAMETERLIST_API+"?type=spe_unit","POST").then(function(t){var a=t.data;0===a.code?e.Unit=a.dicList:e.$message.error(a.msg)})},init:function(e){e?(this.SpecificationId=e.id,this.dataForm.id=e.id,this.dataForm.material=e.materialCode+" "+e.materialName,this.dataForm.brand=e.brand,this.dataForm.largeClass=e.largeClass,this.dataForm.boxSpec=e.boxSpec,this.dataForm.boxSpecUnit=e.boxSpecUnit,this.dataForm.productSpec=e.productSpec,this.dataForm.productSpecUnit=e.productSpecUnit,this.dataForm.changer=e.changer):(this.SpecificationId="",this.dataForm={},this.dataForm.boxSpecUnit="001",this.dataForm.productSpecUnit="002"),this.visible=!0},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&(e.dataForm.materialCode=e.dataForm.material.split(" ")[0],e.dataForm.materialName=e.dataForm.material.split(" ")[1],e.dataForm.brand=e.dataForm.material.split(" ")[2],e.$http(""+(e.SpecificationId?i.c.SPECUPDATE_API:i.c.SPECSAVE_API),"POST",e.dataForm).then(function(t){var a=t.data;0===a.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.submitType=!0,e.visible=!1,e.$emit("refreshDataList")}}):(e.submitType=!0,e.$message.error(a.msg))}))})}},computed:{},components:{}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.SpecificationId?"修改规格信息":"新增规格","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("div",[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"status-icon":"",rules:e.dataRule,"label-width":"100px",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"物料：",prop:"material"}},[e.SpecificationId?a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",disabled:""},on:{change:e.setBrand},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}},e._l(e.SerchSapList,function(e){return a("el-option",{key:e.sapCode+" "+e.itemName+" "+e.kondm,attrs:{label:e.sapCode+" "+e.itemName+" "+e.kondm,value:e.sapCode+" "+e.itemName+" "+e.kondm}})}),1):a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:e.setBrand},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}},e._l(e.SerchSapList,function(e){return a("el-option",{key:e.sapCode+" "+e.itemName+" "+e.kondm,attrs:{label:e.sapCode+" "+e.itemName+" "+e.kondm,value:e.sapCode+" "+e.itemName+" "+e.kondm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌：",prop:"brand"}},[a("el-input",{attrs:{placeholder:"请先选择物料",disabled:""},model:{value:e.dataForm.brand,callback:function(t){e.$set(e.dataForm,"brand",t)},expression:"dataForm.brand"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"大类：",prop:"largeClass"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.dataForm.largeClass,callback:function(t){e.$set(e.dataForm,"largeClass",t)},expression:"dataForm.largeClass"}},e._l(e.largeClass,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"箱规格：",prop:"boxSpec"}},[a("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.dataForm.boxSpec,callback:function(t){e.$set(e.dataForm,"boxSpec",t)},expression:"dataForm.boxSpec"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位：",prop:"boxSpecUnit"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.dataForm.boxSpecUnit,callback:function(t){e.$set(e.dataForm,"boxSpecUnit",t)},expression:"dataForm.boxSpecUnit"}},e._l(e.Unit,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"瓶规格："}},[a("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.dataForm.productSpec,callback:function(t){e.$set(e.dataForm,"productSpec",t)},expression:"dataForm.productSpec"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.dataForm.productSpecUnit,callback:function(t){e.$set(e.dataForm,"productSpecUnit",t)},expression:"dataForm.productSpecUnit"}},e._l(e.Unit,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),e.SpecificationId?a("el-form-item",{attrs:{label:"维护人："}},[a("el-input",{attrs:{placeholder:"手动输入",disabled:""},model:{value:e.dataForm.changer,callback:function(t){e.$set(e.dataForm,"changer",t)},expression:"dataForm.changer"}})],1):e._e()],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dataFormSubmit}},[e._v("确定")])],1)])},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(e){a("2Tej")},"data-v-a4379286",null);t.default=l.exports},QzkX:function(e,t){},qEmF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("P9l9"),l={name:"SpecificationManage",data:function(){return{lodingS:!1,SerchSapList:[],SpecificationList:[],multipleSelection:[],visible:!1,visible1:!1,form:{brand:"",materialCode:"",boxSpec:"",productSpec:""},currPage:1,pageSize:10,totalCount:1}},mounted:function(){var e=this;this.GetList(),this.$http(""+r.c.FINDSAP_API,"POST",{params:""},!1,!1,!1).then(function(t){var a=t.data;0===a.code?e.SerchSapList=a.list:e.$message.error(a.msg)})},methods:{GetList:function(e){var t=this;this.lodingS=!0,e&&(this.currPage=1),this.$http(""+r.c.SPECLIST_API,"POST",{brand:this.form.brand,materialCode:this.form.materialCode,boxSpec:this.form.boxSpec,productSpec:this.form.productSpec,currPage:o()(this.currPage),pageSize:o()(this.pageSize)}).then(function(e){var a=e.data;0===a.code?(t.SpecificationList=a.page.list,t.currPage=a.page.currPage,t.pageSize=a.page.pageSize,t.totalCount=a.page.totalCount):t.$message.error(a.msg),t.visible=!1,t.lodingS=!1,t.visible1=!1})},addOrupdate:function(e){var t=this;this.visible=!0,this.$nextTick(function(){t.$refs.SpecificationAddOrUpdate.init(e)})},remove:function(){var e=this;0===this.multipleSelection.length?this.$message.error("请选择要删除的规格"):this.$confirm("确认删除规格, 是否继续?","删除规格",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http(""+r.c.SPECDEL_API,"POST",e.multipleSelection).then(function(t){var a=t.data;console.log(a),0===a.code?(e.$message({type:"success",message:"删除成功!"}),e.multipleSelection=[],e.GetList()):e.$message.error(a.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e,a){t.multipleSelection.push(e.id)})},indexMethod:function(e){return e+1+(1*this.currPage-1)*(1*this.pageSize)},handleSizeChange:function(e){this.pageSize=e,this.GetList()},handleCurrentChange:function(e){this.currPage=e,this.GetList()}},computed:{},components:{SpecificationAddOrUpdate:a("Of4i").default}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.lodingS,expression:"lodingS",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"main"},[a("el-card",[a("div",{staticClass:"clearfix"},[a("el-row",{staticStyle:{float:"right"}},[a("el-form",{staticClass:"topforms2",attrs:{inline:!0,model:e.form,size:"small","label-width":"68px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.GetList(!0)},submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"物料","suffix-icon":"el-icon-search"},model:{value:e.form.materialCode,callback:function(t){e.$set(e.form,"materialCode",t)},expression:"form.materialCode"}})],1),e._v(" "),a("el-form-item",[e.isAuth("sys:spec:listSpec")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.GetList(!0)}}},[e._v("查询")]):e._e(),e._v(" "),e.isAuth("sys:spec:listSpec")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.visible1=!0}}},[e._v("高级查询")]):e._e(),e._v(" "),e.isAuth("sys:spec:saveSpec")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addOrupdate()}}},[e._v("新增")]):e._e(),e._v(" "),e.isAuth("sys:spec:delSpec")?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.remove()}}},[e._v("批量删除")]):e._e()],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{ref:"table1",staticClass:"orderTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{border:"","header-row-class-name":"tableHead",data:e.SpecificationList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"34"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod,width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"物料","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.materialCode)+" "+e._s(t.row.materialName)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"brand",label:"品牌",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"largeClassName",label:"大类",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"boxSpec",width:"80",label:"箱规格","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"boxSpecUnitName",label:"单位",width:"80","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"productSpec",width:"80",label:"瓶规格","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"productSpecUnitName",label:"单位",width:"80","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"changer",label:"维护人",width:"150","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAuth("sys:spec:updateSpec")?a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(a){return e.addOrupdate(t.row)}}},[e._v("编辑")]):e._e()]}}])})],1)],1),e._v(" "),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currPage,"page-sizes":[10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),e.visible?a("specification-add-or-update",{ref:"SpecificationAddOrUpdate",attrs:{SerchSapList:e.SerchSapList},on:{refreshDataList:e.GetList}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"高级查询","close-on-click-modal":!1,visible:e.visible1},on:{"update:visible":function(t){e.visible1=t}}},[a("div",{staticClass:"formdata"},[a("el-form",{staticClass:"orderdialog",attrs:{model:e.form,size:"small","label-width":"110px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.GetList(!0)}}},[a("el-form-item",{attrs:{label:"物料："}},[a("el-input",{attrs:{placeholder:"手工录入"},model:{value:e.form.materialCode,callback:function(t){e.$set(e.form,"materialCode",t)},expression:"form.materialCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌："}},[a("el-input",{attrs:{placeholder:"手工录入"},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"箱规格："}},[a("el-input",{attrs:{placeholder:"手工录入"},model:{value:e.form.boxSpec,callback:function(t){e.$set(e.form,"boxSpec",t)},expression:"form.boxSpec"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"瓶规格："}},[a("el-input",{attrs:{placeholder:"手工录入"},model:{value:e.form.productSpec,callback:function(t){e.$set(e.form,"productSpec",t)},expression:"form.productSpec"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible1=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.GetList(!0)}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var n=a("C7Lr")(l,s,!1,function(e){a("QzkX")},"data-v-7222dcb2",null);t.default=n.exports}});
//# sourceMappingURL=24.cce63fe2be8f6650761d.js.map