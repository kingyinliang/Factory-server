{"version":3,"sources":["webpack:///src/views/components/table-tree-column/index.vue","webpack:///./src/views/components/table-tree-column/index.vue?59ee","webpack:///./src/views/components/table-tree-column/index.vue","webpack:///./node_modules/lodash/isArray.js"],"names":["table_tree_column","name","props","prop","type","String","treeKey","default","parentKey","levelKey","childKey","methods","childStyles","row","padding-left","this","iconClasses","_expanded","iconStyles","visibility","hasChild","isArray_default","length","toggleHandle","index","_this","data","$parent","store","states","slice","splice","concat","removeChildNode","commit","$nextTick","doLayout","parentId","parentIds","ids","i","indexOf","push","components_table_tree_column","render","_vm","_h","$createElement","_c","_self","_b","attrs","scopedSlots","_u","key","fn","scope","style","on","click","$event","preventDefault","$index","class","_v","_s","$attrs","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","isArray","Array","module","exports"],"mappings":"+HAaAA,GACAC,KAAA,oBACAC,OACAC,MACAC,KAAAC,QAEAC,SACAF,KAAAC,OACAE,QAAA,MAEAC,WACAJ,KAAAC,OACAE,QAAA,YAEAE,UACAL,KAAAC,OACAE,QAAA,UAEAG,UACAN,KAAAC,OACAE,QAAA,aAGAI,SACAC,YADA,SACAC,GACA,OAAAC,gBAAAD,EAAAE,KAAAN,UAAA,IAAAI,EAAAE,KAAAN,UAAA,UAEAO,YAJA,SAIAH,GACA,OAAAA,EAAAI,UAAA,+CAEAC,WAPA,SAOAL,GACA,OAAAM,WAAAJ,KAAAK,SAAAP,GAAA,qBAEAO,SAVA,SAUAP,GACA,OAAAQ,IAAAR,EAAAE,KAAAL,YAAAG,EAAAE,KAAAL,UAAAY,QAAA,OAGAC,aAdA,SAcAC,EAAAX,GAAA,IAAAY,EAAAV,KACA,GAAAA,KAAAK,SAAAP,GAAA,CACA,IAAAa,EAAAX,KAAAY,QAAAC,MAAAC,OAAAH,KAAAI,MAAA,GACAJ,EAAAF,GAAAP,WAAAS,EAAAF,GAAAP,UAEAS,EADAA,EAAAF,GAAAP,UACAS,EAAAK,OAAA,EAAAP,EAAA,GAAAQ,OAAAnB,EAAAE,KAAAL,WAAAsB,OAAAN,GAEAX,KAAAkB,gBAAAP,EAAAb,EAAAE,KAAAT,UAEAS,KAAAY,QAAAC,MAAAM,OAAA,UAAAR,GACAX,KAAAoB,UAAA,WACAV,EAAAE,QAAAS,eAKAH,gBA9BA,SA8BAP,EAAAW,GACA,IAAAC,EAAAjB,IAAAgB,SACA,GAAAA,EAAAf,QAAA,EACA,OAAAI,EAGA,IADA,IAAAa,KACAC,EAAA,EAAAA,EAAAd,EAAAJ,OAAAkB,KACA,IAAAF,EAAAG,QAAAf,EAAAc,GAAAzB,KAAAP,cAAA,IAAA8B,EAAAG,QAAAf,EAAAc,GAAAzB,KAAAT,YACAiC,EAAAG,KAAAhB,EAAAK,OAAAS,EAAA,MAAAzB,KAAAT,UACAkC,KAGA,OAAAzB,KAAAkB,gBAAAP,EAAAa,MC3EeI,GADEC,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,kBAAAH,EAAAK,IAAoCC,OAAOhD,KAAA0C,EAAA1C,MAAgBiD,YAAAP,EAAAQ,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAR,EAAA,QAAmBS,MAAAZ,EAAAjC,YAAA4C,EAAA3C,KAAA6C,IAAuCC,MAAA,SAAAC,GAAiD,OAAxBA,EAAAC,iBAAwBhB,EAAAtB,aAAAiC,EAAAM,OAAAN,EAAA3C,SAAmDmC,EAAA,KAAUe,MAAAlB,EAAA7B,YAAAwC,EAAA3C,KAAA4C,MAAAZ,EAAA3B,WAAAsC,EAAA3C,OAAmEgC,EAAAmB,GAAA,WAAAnB,EAAAoB,GAAAT,EAAA3C,IAAAgC,EAAA1C,OAAA,kBAAiE,kBAAA0C,EAAAqB,QAAA,KAEteC,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACEtE,EACA2C,GATF,EAEA,KAEA,KAEA,MAUe4B,EAAA,QAAAH,EAAiB,4BCAhC,IAAAI,EAAAC,MAAAD,QAEAE,EAAAC,QAAAH","file":"static/js/64.56d2a9e9b3866648daeb.js","sourcesContent":["<template>\r\n  <el-table-column :prop=\"prop\" v-bind=\"$attrs\">\r\n    <template slot-scope=\"scope\">\r\n      <span @click.prevent=\"toggleHandle(scope.$index, scope.row)\" :style=\"childStyles(scope.row)\">\r\n        <i :class=\"iconClasses(scope.row)\" :style=\"iconStyles(scope.row)\"></i>\r\n        {{ scope.row[prop] }}\r\n      </span>\r\n    </template>\r\n  </el-table-column>\r\n</template>\r\n\r\n<script>\r\nimport isArray from 'lodash/isArray'\r\nexport default {\r\n  name: 'table-tree-column',\r\n  props: {\r\n    prop: {\r\n      type: String\r\n    },\r\n    treeKey: {\r\n      type: String,\r\n      default: 'id'\r\n    },\r\n    parentKey: {\r\n      type: String,\r\n      default: 'parentId'\r\n    },\r\n    levelKey: {\r\n      type: String,\r\n      default: '_level'\r\n    },\r\n    childKey: {\r\n      type: String,\r\n      default: 'children'\r\n    }\r\n  },\r\n  methods: {\r\n    childStyles (row) {\r\n      return { 'padding-left': (row[this.levelKey] > 1 ? row[this.levelKey] * 7 : 0) + 'px' }\r\n    },\r\n    iconClasses (row) {\r\n      return [ !row._expanded ? 'el-icon-caret-right' : 'el-icon-caret-bottom' ]\r\n    },\r\n    iconStyles (row) {\r\n      return { 'visibility': this.hasChild(row) ? 'visible' : 'hidden' }\r\n    },\r\n    hasChild (row) {\r\n      return (isArray(row[this.childKey]) && row[this.childKey].length >= 1) || false\r\n    },\r\n    // 切换处理\r\n    toggleHandle (index, row) {\r\n      if (this.hasChild(row)) {\r\n        var data = this.$parent.store.states.data.slice(0)\r\n        data[index]._expanded = !data[index]._expanded\r\n        if (data[index]._expanded) {\r\n          data = data.splice(0, index + 1).concat(row[this.childKey]).concat(data)\r\n        } else {\r\n          data = this.removeChildNode(data, row[this.treeKey])\r\n        }\r\n        this.$parent.store.commit('setData', data)\r\n        this.$nextTick(() => {\r\n          this.$parent.doLayout()\r\n        })\r\n      }\r\n    },\r\n    // 移除子节点\r\n    removeChildNode (data, parentId) {\r\n      var parentIds = isArray(parentId) ? parentId : [parentId]\r\n      if (parentId.length <= 0) {\r\n        return data\r\n      }\r\n      var ids = []\r\n      for (var i = 0; i < data.length; i++) {\r\n        if (parentIds.indexOf(data[i][this.parentKey]) !== -1 && parentIds.indexOf(data[i][this.treeKey]) === -1) {\r\n          ids.push(data.splice(i, 1)[0][this.treeKey])\r\n          i--\r\n        }\r\n      }\r\n      return this.removeChildNode(data, ids)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/components/table-tree-column/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-table-column',_vm._b({attrs:{\"prop\":_vm.prop},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{style:(_vm.childStyles(scope.row)),on:{\"click\":function($event){$event.preventDefault();return _vm.toggleHandle(scope.$index, scope.row)}}},[_c('i',{class:_vm.iconClasses(scope.row),style:(_vm.iconStyles(scope.row))}),_vm._v(\"\\n      \"+_vm._s(scope.row[_vm.prop])+\"\\n    \")])]}}])},'el-table-column',_vm.$attrs,false))}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4ef0473e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/components/table-tree-column/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ef0473e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/components/table-tree-column/index.vue\n// module id = null\n// module chunks = ","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/lodash/isArray.js\n// module id = NGEn\n// module chunks = 18 64"],"sourceRoot":""}