webpackJsonp([35],{HJRT:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("P9l9"),i=l("Lna1"),o={name:"index",data:function(){return{pdf:"",lodingS:!1,visible:!1,visible1:!1,factory:[],workshop:[],productline:[],Text:"",plantList:{orderNo:"",factory:"",workshop:"",productline:"",productdate:"",status:"",currPage:1,pageSize:10,totalCount:0},multipleSelection:[],LtkList:[]}},watch:{"plantList.factory":function(t,e){this.Getdeptbyid(t)},"plantList.workshop":function(t,e){t&&this.GetParentline(t)}},mounted:function(){this.Getdeptcode(),Object(i.f)(this.$)},methods:{doPrint:function(){Object(i.d)(""+a.i.REPOUT_API,"立体库审核数据导出",this)},GetLtkList:function(t){var e=this;this.lodingS=!0,t&&(this.plantList.currPage=1),this.$http(""+a.e.LTKLIST_API,"POST",this.plantList).then(function(t){var l=t.data;0===l.code?(e.LtkList=l.page.list,e.plantList.currPage=l.page.currPage,e.plantList.pageSize=l.page.pageSize,e.plantList.totalCount=l.page.totalCount):e.$message.error(l.msg),e.lodingS=!1})},Getdeptcode:function(){var t=this;this.$http(a.c.FINDORG_API+"?code=factory","POST").then(function(e){var l=e.data;0===l.code?t.factory=l.typeList:t.$message.error(l.msg)})},Getdeptbyid:function(t){var e=this;this.plantList.workshop="",this.plantList.productline="",t&&this.$http(""+a.c.FINDORGBYID_API,"POST",{deptId:t,deptName:"包装 组装"}).then(function(t){var l=t.data;0===l.code?e.workshop=l.typeList:e.$message.error(l.msg)})},GetParentline:function(t){var e=this;this.plantList.productline="",t&&this.$http(""+a.c.FINDORGBYPARENTID_API,"POST",{parentId:t}).then(function(t){var l=t.data;0===l.code?e.productline=l.childList:e.$message.error(l.msg)})},handleSelectionChange:function(t){var e=this;this.multipleSelection=[],t.forEach(function(t,l){e.multipleSelection.push(t)})},checkboxT:function(t){return"checked"===t.status||"noPass"===t.status?0:1},repulseAutios:function(){this.multipleSelection.length<=0?this.$message.error("请选择订单"):this.visible=!0},repulseAutio:function(){var t=this;this.Text.length<=0?this.$message.error("请填写不通过原因"):this.$confirm("确认审核不通过, 是否继续?","审核不通过",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.multipleSelection.forEach(function(e){e.status="noPass",e.memo=t.Text}),t.$http(""+a.e.LTKAUDIT_API,"POST",t.multipleSelection).then(function(e){var l=e.data;0===l.code?(t.visible=!1,t.$message.success("操作成功"),t.GetLtkList()):t.$message.error(l.msg)})})},subAutio:function(){var t=this;this.multipleSelection.length<=0?this.$message.error("请选择订单"):this.$confirm("确认审核通过, 是否继续?","审核通过",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.multipleSelection.forEach(function(t){t.status="checked",t.memo="审核通过"}),t.$http(""+a.e.LTKAUDIT_API,"POST",t.multipleSelection).then(function(e){var l=e.data;0===l.code?(t.$message.success("操作成功"),t.GetLtkList()):t.$message.error(l.msg)})})},handleSizeChange:function(t){this.plantList.pageSize=t,this.GetLtkList()},handleCurrentChange:function(t){this.plantList.currPage=t,this.GetLtkList()}},computed:{},components:{}},s={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.lodingS,expression:"lodingS",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[l("div",{staticClass:"main"},[l("el-card",{staticClass:"searchCard",staticStyle:{margin:"0"}},[l("el-row",{attrs:{type:"flex"}},[l("el-col",[l("el-form",{attrs:{model:t.plantList,size:"small",inline:!0,"label-position":"right","label-width":"85px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.GetLtkList(!0)},submit:function(t){t.preventDefault()}}},[l("el-form-item",{attrs:{label:"工厂："}},[l("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.plantList.factory,callback:function(e){t.$set(t.plantList,"factory",e)},expression:"plantList.factory"}},[l("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.factory,function(t,e){return l("el-option",{key:e,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"车间："}},[l("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.plantList.workshop,callback:function(e){t.$set(t.plantList,"workshop",e)},expression:"plantList.workshop"}},[l("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.workshop,function(t,e){return l("el-option",{key:e,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"产线："}},[l("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"产线"},model:{value:t.plantList.productline,callback:function(e){t.$set(t.plantList,"productline",e)},expression:"plantList.productline"}},[l("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.productline,function(t,e){return l("el-option",{key:e,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"订单状态："}},[l("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.plantList.status,callback:function(e){t.$set(t.plantList,"status",e)},expression:"plantList.status"}},[l("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),l("el-option",{attrs:{label:"未审核",value:"submit"}}),t._v(" "),l("el-option",{attrs:{label:"审核通过",value:"checked"}}),t._v(" "),l("el-option",{attrs:{label:"审核不通过",value:"noPass"}}),t._v(" "),l("el-option",{attrs:{label:"接口失败",value:"0"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"订单号："}},[l("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"订单号"},model:{value:t.plantList.orderNo,callback:function(e){t.$set(t.plantList,"orderNo",e)},expression:"plantList.orderNo"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"日期："}},[l("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"选择","value-format":"yyyy-MM-dd"},model:{value:t.plantList.productdate,callback:function(e){t.$set(t.plantList,"productdate",e)},expression:"plantList.productdate"}})],1),t._v(" "),l("el-form-item",{staticStyle:{"margin-left":"85px"}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.GetLtkList(!0)}}},[t._v("查询")]),t._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.doPrint}},[t._v("导出")]),t._v(" "),t.isAuth("sys:verifyLTK:auditing")?l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subAutio()}}},[t._v("审核通过")]):t._e(),t._v(" "),t.isAuth("sys:verifyLTK:auditing")?l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.repulseAutios()}}},[t._v("审核不通过")]):t._e()],1)],1)],1)],1),t._v(" "),l("div",{staticClass:"toggleSearchBottom"},[l("i",{staticClass:"el-icon-caret-top"})])],1)],1),t._v(" "),l("div",{staticClass:"main",staticStyle:{"padding-top":"0px"}},[l("el-card",{staticClass:"tableCard"},[l("div",{staticClass:"toggleSearchTop"},[l("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),l("div",[l("el-table",{ref:"table1",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{"header-row-class-name":"tableHead",data:t.LtkList,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",selectable:t.checkboxT,width:"34"}}),t._v(" "),l("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n            "+t._s("submit"===e.row.status?"未审核":"checked"===e.row.status?"审核通过":"noPass"===e.row.status?"审核不通过":"")+"\r\n          ")]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"productDate",label:"生产日期","show-overflow-tooltip":!0,width:"120"}}),t._v(" "),l("el-table-column",{attrs:{label:"生产订单号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.orderNo))]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"name",label:"品项","show-overflow-tooltip":!0,width:"360"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.materialCode+" "+e.row.materialName))])]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"batch",label:"生产批次",width:"105"}}),t._v(" "),l("el-table-column",{attrs:{prop:"input",label:"订单入库量",width:"91"}}),t._v(" "),l("el-table-column",{attrs:{prop:"manSolid",label:"人工码垛数-立体库",width:"140"}}),t._v(" "),l("el-table-column",{attrs:{prop:"aiShelves",label:"自动上架-立体库",width:"140"}}),t._v(" "),l("el-table-column",{attrs:{prop:"aiSolid",label:"自动码垛-立体库",width:"140"}}),t._v(" "),l("el-table-column",{attrs:{prop:"unitName",label:"单位","show-overflow-tooltip":!0,width:"50"}}),t._v(" "),l("el-table-column",{attrs:{prop:"workShopMan",label:"车间确认人","show-overflow-tooltip":!0,width:"92"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ltkMan",label:"立体库确认人","show-overflow-tooltip":!0,width:"105"}}),t._v(" "),l("el-table-column",{attrs:{prop:"memo",label:"审核意见","show-overflow-tooltip":!0,width:"78"}}),t._v(" "),l("el-table-column",{attrs:{prop:"verifyDate",label:"审核时间",width:"220"}}),t._v(" "),l("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"备注"}})],1)],1),t._v(" "),l("el-row",[l("el-pagination",{attrs:{"current-page":t.plantList.currPage,"page-sizes":[10,15,20],"page-size":t.plantList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.plantList.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),l("el-dialog",{attrs:{title:"审核拒绝","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[l("p",{staticStyle:{"line-height":"42px"}},[t._v("请填写不通过原因")]),t._v(" "),l("el-input",{staticClass:"textarea",staticStyle:{width:"100%",height:"200px"},attrs:{type:"textarea",rows:6},model:{value:t.Text,callback:function(e){t.Text=e},expression:"Text"}}),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.repulseAutio()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var n=l("C7Lr")(o,s,!1,function(t){l("dYkc"),l("IWkF")},"data-v-aaf4a820",null);e.default=n.exports},IWkF:function(t,e){},dYkc:function(t,e){}});
//# sourceMappingURL=35.eddd2e37cadeeda26292.js.map