webpackJsonp([45],{FLt6:function(t,e){},"c2v+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=a("P9l9"),s=a("Lna1"),n=a("jO17"),i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),l=this&&this.__decorate||function(t,e,a,o){var r,s=arguments.length,n=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(n=(s<3?r(n):s>3?r(e,a,n):r(e,a))||n);return s>3&&n&&Object.defineProperty(e,a,n),n},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.params={factoryId:"",factoryName:"",workshopId:"",workshopName:"",productlineId:"",productlineName:"",fermentPotNo:"",fermentPotName:"",startDate:Object(s.c)(new Date,"yyyy-MM-dd"),endDate:Object(s.c)(new Date,"yyyy-MM-dd")},e.factoryList=[],e.workshopList=[],e.productlineList=[],e.fermentPotList=[],e.dataList=[],e.searched=!1,e.currPage=1,e.pageSize=10,e.totalCount=0,e.plantList={},e}return i(e,t),e.prototype.mounted=function(){this.getFactory(),this.getWorkshop(this.params.factoryId),this.getProductLine(this.params.workshopId),this.getFermentPot(this.params.factoryId)},e.prototype.isQueryAuth=function(){return!0},e.prototype.isExcelAuth=function(){return!0},e.prototype.changeOptions=function(t){var e=this;if("factory"===t){var a=this.factoryList.find(function(t){return t.deptId===e.params.factoryId});this.params.factoryName=a?a.deptName:""}else if("workshop"===t){a=this.workshopList.find(function(t){return t.deptId===e.params.workshopId});this.params.workshopName=a?a.deptName:""}else if("productline"===t){a=this.productlineList.find(function(t){return t.deptId===e.params.productlineId});this.params.productlineName=a?a.deptName:""}else if("fermentPot"===t){a=this.fermentPotList.find(function(t){return t.holderId===e.params.fermentPotNo});this.params.fermentPotName=a?a.holderName:""}},e.prototype.getFactory=function(){var t=this;this.factoryList=[],n.b.prototype.$http(r.c.FINDORG_API+"?code=factory","POST",{},!1,!1,!1).then(function(e){0===e.data.code?t.factoryList=e.data.typeList:t.$message.error(e.data.msg)})},e.prototype.getWorkshop=function(t){var e=this;this.workshopList=[],t&&n.b.prototype.$http(""+r.c.FINDORGBYID_API,"POST",{deptId:t,deptName:"压榨"},!1,!1,!1).then(function(t){0===t.data.code?e.workshopList=t.data.typeList:e.$message.error(t.data.msg)})},e.prototype.getProductLine=function(t){var e=this;this.productlineList=[],t&&n.b.prototype.$http(""+r.c.FINDORGBYPARENTID_API,"POST",{parentId:t,deptType:"proLine"},!1,!1,!1).then(function(t){var a=t.data;0===a.code?e.productlineList=a.childList:e.$message.error(a.msg)})},e.prototype.getFermentPot=function(t){var e=this;this.fermentPotList=[],t&&n.b.prototype.$http(""+r.j.MATERIAL_APPLY_POT_LIST_API,"POST",{factory:t},!1,!1,!1).then(function(t){0===t.data.code?e.fermentPotList=t.data.num:e.$message.error(t.data.msg)})},e.prototype.exportExcel=function(){this.plantList={factory:this.params.factoryId,workshop:this.params.workshopId,productLine:this.params.productlineId,fermentPotNo:this.params.fermentPotNo,commitDateOne:this.params.startDate,commitDateTwo:this.params.endDate};Object(s.d)(""+r.i.APPLY_MATERIAL_EXPECT_API,"压榨领用报表",this)},e.prototype.getCompleteData=function(){this.searched=!0;var t={factory:this.params.factoryId,workshop:this.params.workshopId,productLine:this.params.productlineId,fermentPotNo:this.params.fermentPotNo,commitDateOne:this.params.startDate,commitDateTwo:this.params.endDate,currPage:this.currPage+"",pageSize:this.pageSize+""};this.getDataList(t)},e.prototype.getDataList=function(t){var e=this;this.dataList=[],n.b.prototype.$http(""+r.i.APPLY_MATERIAL_LIST_API,"POST",t).then(function(t){0===t.data.code?(e.dataList=t.data.page.list,e.totalCount=t.data.page.totalCount):e.$message.error(t.data.msg)}).catch(function(t){console.log("catch data::",t)})},e.prototype.handleSizeChange=function(t){this.pageSize=t;var e={factory:this.params.factoryId,workshop:this.params.workshopId,productLine:this.params.productlineId,fermentPotNo:this.params.fermentPotNo,commitDateOne:this.params.startDate,commitDateTwo:this.params.endDate,currPage:this.currPage+"",pageSize:this.pageSize+""};this.getDataList(e)},e.prototype.handleCurrentChange=function(t){this.currPage=t;var e={factory:this.params.factoryId,workshop:this.params.workshopId,productLine:this.params.productlineId,fermentPotNo:this.params.fermentPotNo,commitDateOne:this.params.startDate,commitDateTwo:this.params.endDate,currPage:this.currPage+"",pageSize:this.pageSize+""};this.getDataList(e)},e.prototype.onChangeValue=function(t,e){this.searched=!1,this.currPage=1,this.pageSize=10,this.totalCount=0},e.prototype.onChangeFactory=function(t,e){this.params.workshopId="",this.params.workshopName="",this.params.fermentPotNo="",this.params.fermentPotName="",this.getWorkshop(t),this.getFermentPot(t)},e.prototype.onChangeWorkshop=function(t,e){this.params.productlineId="",this.params.productlineName="",this.getProductLine(t)},l([Object(n.c)("params",{deep:!0})],e.prototype,"onChangeValue",null),l([Object(n.c)("params.factoryId")],e.prototype,"onChangeFactory",null),l([Object(n.c)("params.workshopId")],e.prototype,"onChangeWorkshop",null),e=l([Object(n.a)({components:{}})],e)}(n.b),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.lodingStatus,expression:"lodingStatus",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"main"},[a("el-card",{staticClass:"newCard"},[a("el-row",{staticStyle:{"border-bottom":"1px solid #E9E9E9","margin-bottom":"12px"},attrs:{type:"flex"}},[a("el-col",[a("el-form",{attrs:{model:t.params,size:"small",inline:!0,"label-position":"right","label-width":"70px"}},[a("el-form-item",{attrs:{label:"生产工厂："}},[a("el-select",{staticClass:"selectwpx",staticStyle:{width:"140px"},on:{change:function(e){return t.changeOptions("factory")}},model:{value:t.params.factoryId,callback:function(e){t.$set(t.params,"factoryId",e)},expression:"params.factoryId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.factoryList,function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"生产车间："}},[a("el-select",{staticClass:"selectwpx",staticStyle:{width:"140px"},on:{change:function(e){return t.changeOptions("workshop")}},model:{value:t.params.workshopId,callback:function(e){t.$set(t.params,"workshopId",e)},expression:"params.workshopId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.workshopList,function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"布浆线："}},[a("el-select",{staticClass:"selectwpx",staticStyle:{width:"140px"},on:{change:function(e){return t.changeOptions("productline")}},model:{value:t.params.productlineId,callback:function(e){t.$set(t.params,"productlineId",e)},expression:"params.productlineId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.productlineList,function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"发酵罐："}},[a("el-select",{staticClass:"selectwpx",staticStyle:{width:"140px"},on:{change:function(e){return t.changeOptions("fermentPot")}},model:{value:t.params.fermentPotNo,callback:function(e){t.$set(t.params,"fermentPotNo",e)},expression:"params.fermentPotNo"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.fermentPotList,function(t,e){return a("el-option",{key:e,attrs:{label:t.holderName,value:t.holderId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"生产日期："}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.params.startDate,callback:function(e){t.$set(t.params,"startDate",e)},expression:"params.startDate"}}),t._v("\n                - "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.params.endDate,callback:function(e){t.$set(t.params,"endDate",e)},expression:"params.endDate"}})],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{width:"340px"}},[a("el-row",{staticClass:"rowButton"},[t.isExcelAuth()?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.exportExcel()}}},[t._v("导出")]):t._e(),t._v(" "),t.isQueryAuth()?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getCompleteData()}}},[t._v("查询")]):t._e()],1)],1)],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.searched,expression:"searched"}],staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{"min-height":"320px"}},[a("el-table",{attrs:{border:"","header-row-class-name":"tableHead",data:t.dataList}},[a("el-table-column",{attrs:{label:"工厂",width:"180","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.factoryName)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"车间","show-overflow-tooltip":!0,width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.workShopName)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"布浆线","show-overflow-tooltip":!0,width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.productLineName)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生产日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.created.substring(0,10))+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发酵罐",width:"100","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.fermentPotName)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发酵罐剩余量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.remainAmount)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"起始数（方）",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.startAmount)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"终止数（方）",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.endAmount)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"打料数（方）",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.amount)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"暂存罐剩余量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.storageAmount)+"\n              ")]}}])})],1),t._v(" "),a("el-row",{staticStyle:{"font-size":"14px","line-height":"30px","margin-top":"10px"}})],1),t._v(" "),a("el-row",[a("el-pagination",{attrs:{"current-page":t.currPage,"page-sizes":[10,15,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)])],1)},staticRenderFns:[]};var d=a("C7Lr")(p,c,!1,function(t){a("wEeQ"),a("FLt6")},"data-v-69506e99",null);e.default=d.exports},wEeQ:function(t,e){}});
//# sourceMappingURL=45.2deb2e0da08e34b9543b.js.map