webpackJsonp([57],{Ari0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),l=a.n(r),o=a("P9l9"),s={name:"OrderManage",data:function(){return{loading:!0,visible:!1,orderTime:{},form:{orderNo:"",materialCode:"",dispatchMan:"",startDateOne:"",commitDateOne:""},sapOrderlist:[],currPage:1,pageSize:10,totalCount:1}},mounted:function(){this.GetOrderList()},methods:{GetOrderList:function(){var e=this;this.form.currPage=l()(this.currPage),this.form.pageSize=l()(this.pageSize),this.$http(""+o.c.ORDERLIST_API,"POST",this.form).then(function(t){var a=t.data;console.log(a),e.loading=!1,0===a.code?(e.sapOrderlist=a.page.list,e.pageSize=a.page.pageSize,e.totalCount=a.page.totalCount,e.currPage=a.page.currPage,e.visible=!1):e.$message.error(a.msg)})},sapOrderUpdate:function(){var e=this;this.loading=!0,this.$http(""+o.c.SAPORDERUPDATE_API,"GET").then(function(t){0===t.data.code&&(e.orderTime=setInterval(function(){e.GetOrderUpdateStatus()},4e3))}).catch(function(){e.loading=!1})},GetOrderUpdateStatus:function(){var e=this;this.$http(""+o.c.GETSAPORDERUPDATE_API,"GET").then(function(t){var a=t.data;0===a.code?a.asyncRecord&&("0"===a.asyncRecord.asyncStatus?(e.loading=!1,clearInterval(e.orderTime),e.$message.error("同步失败")):"1"===a.asyncRecord.asyncStatus&&(e.loading=!1,clearInterval(e.orderTime),e.$message.success("同步成功"),e.GetOrderList())):(e.loading=!1,clearInterval(e.orderTime),e.$message.error(a.msg))}).catch(function(){e.loading=!1,clearInterval(e.orderTime)})},querys:function(e){e&&(this.form.currPage=1),this.GetOrderList()},handleSizeChange:function(e){this.pageSize=e,this.GetOrderList()},handleCurrentChange:function(e){this.currPage=e,this.GetOrderList()}},computed:{},components:{}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.lodingStatus,expression:"lodingStatus",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"main"},[a("el-card",[a("div",{staticClass:"clearfix"},[a("el-row",{staticStyle:{float:"right"}},[a("el-form",{staticClass:"topforms2",attrs:{inline:!0,model:e.form,size:"small","label-width":"68px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querys(!0)},submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"订单号","suffix-icon":"el-icon-search"},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1),e._v(" "),a("el-form-item",[e.isAuth("sys:sapOrder:list")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.querys(!0)}}},[e._v("查询")]):e._e(),e._v(" "),e.isAuth("sys:sapOrder:list")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.visible=!0}}},[e._v("高级查询")]):e._e(),e._v(" "),e.isAuth("sys:sapOrder:syncOrderManual")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.sapOrderUpdate}},[e._v("同步")]):e._e()],1)],1)],1)],1),e._v(" "),a("el-row",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"正在同步中"}},[a("el-table",{ref:"table1",staticClass:"orderTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{border:"","header-row-class-name":"tableHead",data:e.sapOrderlist,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{width:"122",label:"生产订单"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.orderNo)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单类型",width:"77"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.orderType)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"factory",label:"工厂",width:"77"}}),e._v(" "),a("el-table-column",{attrs:{prop:"commitDate",label:"基本完成日期","header-align":"center",width:"105"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"基本开始日期","header-align":"center",width:"105"}}),e._v(" "),a("el-table-column",{attrs:{label:"物料","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.materialCode)+" "+e._s(t.row.materialName)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNum",label:"订单数量","header-align":"center",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderUnit",label:"订单单位","header-align":"center",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dispatchMan",label:"生产调度员","header-align":"center",width:"91"}}),e._v(" "),a("el-table-column",{attrs:{prop:"syncDate",label:"同步日期",width:"100"}})],1)],1),e._v(" "),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currPage,"page-sizes":[10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"高级查询","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"formdata"},[a("el-form",{staticClass:"orderdialog",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-form-item",{attrs:{label:"生产订单："}},[a("el-input",{attrs:{placeholder:"手工录入"},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料："}},[a("el-input",{attrs:{placeholder:"手工录入"},model:{value:e.form.materialCode,callback:function(t){e.$set(e.form,"materialCode",t)},expression:"form.materialCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生产调度员："}},[a("el-input",{attrs:{placeholder:"手工录入"},model:{value:e.form.dispatchMan,callback:function(t){e.$set(e.form,"dispatchMan",t)},expression:"form.dispatchMan"}})],1),e._v(" "),a("el-form-item",{staticClass:"times",attrs:{label:"基本开始日期："}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.startDateOne,callback:function(t){e.$set(e.form,"startDateOne",t)},expression:"form.startDateOne"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.startDateTwo,callback:function(t){e.$set(e.form,"startDateTwo",t)},expression:"form.startDateTwo"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"times",attrs:{label:"基本完成日期："}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.commitDateOne,callback:function(t){e.$set(e.form,"commitDateOne",t)},expression:"form.commitDateOne"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.commitDateTwo,callback:function(t){e.$set(e.form,"commitDateTwo",t)},expression:"form.commitDateTwo"}})],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.querys(!0)}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var n=a("C7Lr")(s,i,!1,function(e){a("xSiL"),a("oSCz")},"data-v-239af9d0",null);t.default=n.exports},oSCz:function(e,t){},xSiL:function(e,t){}});
//# sourceMappingURL=57.ebe24c77f8d950f8e8bc.js.map