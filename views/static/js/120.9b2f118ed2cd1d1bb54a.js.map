{"version":3,"sources":["webpack:///src/views/page/DataEntry/KojiMaking/Out/Outcomponents/inStock.vue","webpack:///./src/views/page/DataEntry/KojiMaking/Out/Outcomponents/inStock.vue?38aa","webpack:///./src/views/page/DataEntry/KojiMaking/Out/Outcomponents/inStock.vue"],"names":["inStock","name","data","InStock","batch","changed","changer","created","creator","delFlag","holderId","houseNo","id","isSplit","materialCode","materialName","orderHouseId","orderNo","pulpWeight","remark","saltWaterWeight","sauceWeight","serialNumber","status","unit","wheatWeight","InStockAuditlog","InStockstatus","BrineNum","ThreeNum","allP","allM","allS","params","params1","params2","params3","props","isRedact","formHeader","mounted","this","GetParams","watch","n","o","methods","setBrineNum","num","GetThreeNum","_this","$http","api","OUTINNUMLIST_API","then","_ref","code","list","length","$message","error","msg","_this2","PARAMETERLIST_API","_ref2","dicList","forEach","item","index","value","GetOutInStorage","_this3","OUTINLIST_API","orderId","_ref3","vrlist","sub","che","no","sav","$emit","InStockRul","_this4","ty","SaveOrSubmitInStock","str","resolve","reject","_this5","holderName","inPotName","inPotNo","OUTINSUBMIT_API","OUTINSAVE_API","_ref4","addInStock","row","splice","delInStock","RowDelFlag","_ref5","rowIndex","computed","components","AuditLog","__webpack_require__","e","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","catch","oe","Outcomponents_inStock","render","_vm","_h","$createElement","_c","_self","attrs","header-row-class-name","row-class-name","border","tooltip-effect","type","width","label","_v","scopedSlots","_u","key","fn","scope","_s","toFixed","disabled","size","placeholder","maxlength","model","callback","$$v","$set","expression","slot","staticClass","show-overflow-tooltip","prop","fixed","icon","circle","on","click","$event","_e","$index","tableData","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/120.9b2f118ed2cd1d1bb54a.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-table header-row-class-name=\"tableHead\" :data=\"InStock\" :row-class-name=\"RowDelFlag\" border tooltip-effect=\"dark\">\r\n      <el-table-column type=\"index\" width=\"50\" label=\"序号\"></el-table-column>\r\n      <el-table-column width=\"115\" label=\"豆粕量（KG）\">\r\n        <template slot-scope=\"scope\">\r\n          {{scope.row.pulpWeight = ThreeNum.allP}}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"115\" label=\"麦粉量（KG）\">\r\n        <template slot-scope=\"scope\">\r\n          {{scope.row.wheatWeight = ThreeNum.allM}}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"115\" label=\"盐水量（L）\">\r\n        <template slot-scope=\"scope\">\r\n          {{scope.row.saltWaterWeight = BrineNum}}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"125\" label=\"入库酱醪量\">\r\n        <template slot-scope=\"scope\">\r\n          <p>{{scope.row.sauceWeight = (((scope.row.pulpWeight*1 + scope.row.wheatWeight*1) * params.params1 + scope.row.saltWaterWeight * params.params2) / params.params3).toFixed(2)}}</p>\r\n          <!--<p v-show=\"!(isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')\">{{(scope.row.websign === scope.row.saltWaterWeight? scope.row.sauceWeight = scope.row.sauceWeight : scope.row.sauceWeight =  (((scope.row.pulpWeight*1 + scope.row.wheatWeight*1) * params.params1 + scope.row.saltWaterWeight * params.params2) / params.params3).toFixed(2))}}</p>-->\r\n          <!--<el-input v-if=\"(isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')\" v-model=\"scope.row.sauceWeight\" :disabled=\"!(isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')\" size=\"small\" placeholder=\"手工录入\"></el-input>-->\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"125\" label=\"入库批次\">\r\n        <template slot=\"header\">\r\n          <i class=\"reqI\">*</i>\r\n          <span>入库批次</span>\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-input v-model=\"scope.row.batch\" :disabled=\"!(isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')\" size=\"small\" placeholder=\"手工录入\" maxlength=\"10\"></el-input>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"85\" label=\"入罐罐号\" show-overflow-tooltip>\r\n        <template slot-scope=\"scope\">{{scope.row.holderName}}</template>\r\n      </el-table-column>\r\n      <el-table-column width=\"50\" label=\"单位\" prop=\"unit\"></el-table-column>\r\n      <el-table-column width=\"\" label=\"操作人\" prop=\"changer\" show-overflow-tooltip></el-table-column>\r\n      <el-table-column width=\"\" label=\"操作时间\" prop=\"changed\" show-overflow-tooltip></el-table-column>\r\n      <el-table-column width=\"70\" label=\"操作\" fixed=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" icon=\"el-icon-delete\" circle size=\"small\" :disabled=\"!(isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')\" @click=\"delInStock(scope.row)\" v-if=\"scope.row.isSplit === '1' \">删除</el-button>\r\n          <el-button type=\"text\" :disabled=\"!(isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')\" @click=\"addInStock(scope.row, scope.$index)\" v-if=\"scope.row.isSplit === '0' \"><i class=\"icons iconfont factory-chaifen\"></i>新增</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <audit-log :tableData=\"InStockAuditlog\"></audit-log>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {KJM_API, SYSTEMSETUP_API} from '@/api/api'\r\nexport default {\r\n  name: 'inStock',\r\n  data () {\r\n    return {\r\n      InStock: [{\r\n        batch: '',\r\n        changed: '',\r\n        changer: '',\r\n        created: '',\r\n        creator: '',\r\n        delFlag: '0',\r\n        holderId: '',\r\n        houseNo: '',\r\n        id: '',\r\n        isSplit: '0',\r\n        materialCode: '',\r\n        materialName: '',\r\n        orderHouseId: '',\r\n        orderNo: '1',\r\n        pulpWeight: '',\r\n        remark: '',\r\n        saltWaterWeight: '',\r\n        sauceWeight: '',\r\n        serialNumber: '',\r\n        status: '',\r\n        unit: 'L',\r\n        wheatWeight: ''\r\n      }],\r\n      InStockAuditlog: [],\r\n      InStockstatus: '',\r\n      BrineNum: 0,\r\n      ThreeNum: {\r\n        allP: '',\r\n        allM: '',\r\n        allS: ''\r\n      },\r\n      params: {\r\n        params1: '',\r\n        params2: '',\r\n        params3: ''\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    isRedact: {},\r\n    formHeader: {}\r\n  },\r\n  mounted () {\r\n    this.GetParams()\r\n  },\r\n  watch: {\r\n    'BrineNum' (n, o) {\r\n    }\r\n  },\r\n  methods: {\r\n    setBrineNum (num) {\r\n      this.BrineNum = num\r\n    },\r\n    GetThreeNum (formHeader) {\r\n      this.$http(`${KJM_API.OUTINNUMLIST_API}`, 'POST', {\r\n        orderHouseId: formHeader.id\r\n      }).then(({data}) => {\r\n        if (data.code === 0) {\r\n          if (data.list.length !== 0) {\r\n            this.ThreeNum = data.list[0]\r\n          }\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      })\r\n    },\r\n    GetParams () {\r\n      this.$http(`${SYSTEMSETUP_API.PARAMETERLIST_API}?type=ZQ_jianglao_canshu`, 'POST').then(({data}) => {\r\n        if (data.code === 0) {\r\n          data.dicList.forEach((item, index) => {\r\n            if (item.code === 'CANSHU1') {\r\n              this.params.params1 = (item.value * 1)\r\n            }\r\n            if (item.code === 'CANSHU2') {\r\n              this.params.params2 = (item.value * 1)\r\n            }\r\n            if (item.code === 'CANSHU3') {\r\n              this.params.params3 = (item.value * 1)\r\n            }\r\n          })\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      })\r\n    },\r\n    // 列表\r\n    GetOutInStorage (formHeader) {\r\n      this.$http(`${KJM_API.OUTINLIST_API}`, 'POST', {\r\n        orderId: formHeader.orderId,\r\n        orderHouseId: formHeader.id,\r\n        orderNo: formHeader.orderNo\r\n      }).then(({data}) => {\r\n        if (data.code === 0) {\r\n          this.InStock = data.list\r\n          this.InStockAuditlog = data.vrlist\r\n          let sub = 0\r\n          let che = 0\r\n          let no = 0\r\n          let sav = 0\r\n          this.InStock.forEach((item) => {\r\n            // item.websign = item.saltWaterWeight\r\n            if (item.status === 'noPass') {\r\n              no = no + 1\r\n            } else if (item.status === 'submit') {\r\n              sub = sub + 1\r\n            } else if (item.status === 'checked') {\r\n              che = che + 1\r\n            } else if (item.status === 'saved') {\r\n              sav = sav + 1\r\n            }\r\n          })\r\n          if (no > 0) {\r\n            this.InStockstatus = 'noPass'\r\n          } else if (sub > 0) {\r\n            this.InStockstatus = 'submit'\r\n          } else if (sav > 0) {\r\n            this.InStockstatus = 'saved'\r\n          } else if (che > 0) {\r\n            this.InStockstatus = 'checked'\r\n          }\r\n          this.$emit('GetInStockStatus', this.InStockstatus)\r\n          if (data.list.length === 0) {\r\n            this.InStock = [{\r\n              batch: '',\r\n              changed: '',\r\n              changer: '',\r\n              created: '',\r\n              creator: '',\r\n              delFlag: '0',\r\n              holderId: '',\r\n              houseNo: '',\r\n              id: '',\r\n              isSplit: '0',\r\n              materialCode: '',\r\n              materialName: '',\r\n              orderHouseId: '',\r\n              orderNo: '1',\r\n              pulpWeight: '',\r\n              remark: '',\r\n              saltWaterWeight: '',\r\n              sauceWeight: '',\r\n              serialNumber: '',\r\n              status: '',\r\n              unit: 'L',\r\n              wheatWeight: ''\r\n            }]\r\n          }\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      })\r\n    },\r\n    InStockRul () {\r\n      let ty = true\r\n      this.InStock.forEach((item) => {\r\n        if (item.sauceWeight && item.batch) {} else {\r\n          ty = false\r\n          this.$message.error('生产入库必填项未填')\r\n          return false\r\n        }\r\n        if (item.pulpWeight) {} else {\r\n          ty = false\r\n          this.$message.error('生产入库豆粕量未填')\r\n          return false\r\n        }\r\n        if (item.wheatWeight) {} else {\r\n          ty = false\r\n          this.$message.error('生产入库麦粉量未填')\r\n          return false\r\n        }\r\n        if (item.saltWaterWeight) {} else {\r\n          ty = false\r\n          this.$message.error('生产入库盐水量未填')\r\n          return false\r\n        }\r\n        if (item.batch.length < 10) {\r\n          ty = false\r\n          this.$message.error('生产入库批次必须为10位')\r\n          return false\r\n        }\r\n      })\r\n      return ty\r\n    },\r\n    // 保存 or 提交\r\n    SaveOrSubmitInStock (str, resolve, reject) {\r\n      this.InStock.forEach((item) => {\r\n        item.materialCode = this.formHeader.materialCode\r\n        item.materialName = this.formHeader.materialName\r\n        item.orderHouseId = this.formHeader.id\r\n        item.holderName = this.formHeader.inPotName\r\n        item.holderId = this.formHeader.inPotNo\r\n        if (item.status) {\r\n          if (item.status === 'saved') {\r\n            item.status = str\r\n          } else if (item.status === 'noPass' && str === 'submit') {\r\n            item.status = str\r\n          }\r\n        } else {\r\n          item.status = str\r\n        }\r\n      })\r\n      this.$http(`${str === 'submit' ? KJM_API.OUTINSUBMIT_API : KJM_API.OUTINSAVE_API}`, 'POST', this.InStock).then(({data}) => {\r\n        if (data.code === 0) {\r\n          if (resolve) {\r\n            resolve('resolve')\r\n          }\r\n        } else {\r\n          this.$message.error(data.msg)\r\n          if (reject) {\r\n            reject('生产入库' + data.msg)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 拆分\r\n    addInStock (row, index) {\r\n      this.InStock.splice(index + 1, 0, {\r\n        pulpWeight: row.pulpWeight,\r\n        wheatWeight: row.wheatWeight,\r\n        saltWaterWeight: row.saltWaterWeight,\r\n        materialCode: row.materialCode,\r\n        materialName: row.materialName,\r\n        houseNo: row.houseNo,\r\n        unit: row.unit,\r\n        isSplit: '1',\r\n        delFlag: '0'\r\n      })\r\n    },\r\n    // 删除\r\n    delInStock (row) {\r\n      row.delFlag = '1'\r\n    },\r\n    //  RowDelFlag\r\n    RowDelFlag ({row, rowIndex}) {\r\n      if (row.delFlag === '1') {\r\n        return 'rowDel'\r\n      } else {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {\r\n    AuditLog: resolve => {\r\n      require(['@/views/components/AuditLog'], resolve)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.icons{\r\n  display: block;\r\n  float: left;\r\n  height:14px;\r\n  width:14px;\r\n  margin-right: 5px;\r\n}\r\n.reqI{\r\n  color: red;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/page/DataEntry/KojiMaking/Out/Outcomponents/inStock.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{attrs:{\"header-row-class-name\":\"tableHead\",\"data\":_vm.InStock,\"row-class-name\":_vm.RowDelFlag,\"border\":\"\",\"tooltip-effect\":\"dark\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\",\"label\":\"序号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"115\",\"label\":\"豆粕量（KG）\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.pulpWeight = _vm.ThreeNum.allP)+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"115\",\"label\":\"麦粉量（KG）\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.wheatWeight = _vm.ThreeNum.allM)+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"115\",\"label\":\"盐水量（L）\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.saltWaterWeight = _vm.BrineNum)+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"125\",\"label\":\"入库酱醪量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',[_vm._v(_vm._s(scope.row.sauceWeight = (((scope.row.pulpWeight*1 + scope.row.wheatWeight*1) * _vm.params.params1 + scope.row.saltWaterWeight * _vm.params.params2) / _vm.params.params3).toFixed(2)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"125\",\"label\":\"入库批次\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"disabled\":!(_vm.isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked'),\"size\":\"small\",\"placeholder\":\"手工录入\",\"maxlength\":\"10\"},model:{value:(scope.row.batch),callback:function ($$v) {_vm.$set(scope.row, \"batch\", $$v)},expression:\"scope.row.batch\"}})]}}])},[_c('template',{slot:\"header\"},[_c('i',{staticClass:\"reqI\"},[_vm._v(\"*\")]),_vm._v(\" \"),_c('span',[_vm._v(\"入库批次\")])])],2),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"85\",\"label\":\"入罐罐号\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.holderName))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"50\",\"label\":\"单位\",\"prop\":\"unit\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"\",\"label\":\"操作人\",\"prop\":\"changer\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"\",\"label\":\"操作时间\",\"prop\":\"changed\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"70\",\"label\":\"操作\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isSplit === '1' )?_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"small\",\"disabled\":!(_vm.isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')},on:{\"click\":function($event){return _vm.delInStock(scope.row)}}},[_vm._v(\"删除\")]):_vm._e(),_vm._v(\" \"),(scope.row.isSplit === '0' )?_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!(_vm.isRedact && scope.row.status !== 'submit' && scope.row.status !== 'checked')},on:{\"click\":function($event){return _vm.addInStock(scope.row, scope.$index)}}},[_c('i',{staticClass:\"icons iconfont factory-chaifen\"}),_vm._v(\"新增\")]):_vm._e()]}}])})],1),_vm._v(\" \"),_c('audit-log',{attrs:{\"tableData\":_vm.InStockAuditlog}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-20f5a77f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/page/DataEntry/KojiMaking/Out/Outcomponents/inStock.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-20f5a77f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./inStock.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./inStock.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./inStock.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-20f5a77f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./inStock.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-20f5a77f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/page/DataEntry/KojiMaking/Out/Outcomponents/inStock.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}