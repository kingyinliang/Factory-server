{"version":3,"sources":["webpack:///src/views/page/DataEntry/FryWheat/common/applyMateriel.vue","webpack:///./src/views/page/DataEntry/FryWheat/common/applyMateriel.vue?88c5","webpack:///./src/views/page/DataEntry/FryWheat/common/applyMateriel.vue"],"names":["applyMateriel","data","materialDictList","wheatContainerList","readAudit","materielDataList","mounted","this","getMaterialDictList","getWheatContainerList","props","isRedact","Boolean","applyMaterielState","String","order","Object","methods","saveMateriel","resolve","_this","length","forEach","item","status","trim","$http","api","APPLYMATERIELSAVE_API","then","_ref","code","$message","error","msg","catch","console","log","submitMateriel","_this2","APPLYMATERIELSUBMIT_API","_ref2","validate","undefined","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","value","delFlag","materialCode","deviceId","batch","wheatWeight","err","return","_this3","workShopName","params","type","holder_type","pageSize","currPage","CONTAINERLIST_API","_ref3","page","list","_this4","PARAMETERLIST_API","_ref4","dicList","getMaterielDataList","orderId","_this5","inState","APPLYMATERIELLIST_API","order_id","_ref5","listForm","listApproval","no","sub","che","sav","finally","$emit","addNewRecord","lastArr","filter","last","push","id","materialName","holderName","weightUnit","remark","dellistbomS","row","rowDelFlag","_ref6","rowIndex","changeWheatContainer","ele","find","holderId","changeProduct","computed","totalInstock","total","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","parseFloat","watch","components","AuditLog","__webpack_require__","e","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","oe","common_applyMateriel","render","_vm","_h","$createElement","_c","_self","attrs","span","body-style","staticClass","staticStyle","margin-bottom","float","size","disabled","on","click","$event","_v","ref","width","header-row-class-name","row-class-name","border","tooltip-effect","label","scopedSlots","_u","key","fn","scope","value-key","placeholder","change","model","callback","$$v","$set","expression","_l","index","show-overflow-tooltip","maxlength","_n","_s","fixed","icon","circle","margin-top","tableData","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/84.2519858e17f030676f99.js","sourcesContent":["<!--生产入库-->\r\n<template>\r\n  <div>\r\n    <!--数据录入-->\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card body-style=\"padding-top:10px;\">\r\n          <div class=\"clearfix topBox\">\r\n            <div class=\"btn\" style=\"margin-bottom:8px;\">\r\n              <el-button  style=\"float:right;\"  type=\"primary\" @click=\"addNewRecord()\" size=\"small\" :disabled=\"!isRedact || applyMaterielState == 'submit' || applyMaterielState == 'checked'\">新增</el-button>\r\n              <!-- <el-button  style=\"float:right;\"  type=\"primary\" @click=\"saveMaterielList()\" size=\"small\" >baocun</el-button>\r\n              <el-button  style=\"float:right;\"  type=\"primary\" @click=\"submitMaterielList()\" size=\"small\" >tijiao</el-button> -->\r\n              <div class='clearfix'></div>\r\n            </div>\r\n          </div>\r\n          <el-table\r\n            ref=\"table1\"\r\n            header-row-class-name=\"tableHead\"\r\n            :data=\"materielDataList\"\r\n            :row-class-name=\"rowDelFlag\"\r\n            border\r\n            tooltip-effect=\"dark\"\r\n            style=\"width: 100%;  margin-bottom: 20px\">\r\n            <el-table-column\r\n              label=\"物料\"\r\n              width=\"220\">\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"required\">\r\n                  <i class=\"reqI\">*</i>\r\n                  <el-select @change=\"changeProduct(scope.row)\"  v-model=\"scope.row.materialCode\" value-key=\"materialCode\" placeholder=\"请选择物料\"  :disabled=\"!isRedact || scope.row.status === 'submit' || scope.row.status === 'checked'\" size=\"small\">\r\n                    <el-option v-for=\"(item, index) in materialDictList\" :key=\"index\" :label=\"item.code + ' ' + item.value\" :value=\"item.code\" ></el-option>\r\n                  </el-select>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"粮仓\"\r\n              :show-overflow-tooltip=\"true\"\r\n              width=\"200\">\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"required\">\r\n                  <i class=\"reqI\">*</i>\r\n                  <el-select @change=\"changeWheatContainer(scope.row)\"  v-model=\"scope.row.deviceId\" value-key=\"deviceId\" placeholder=\"请选择粮仓\" :disabled=\"!isRedact || scope.row.status === 'submit' || scope.row.status === 'checked'\" size=\"small\">\r\n                    <el-option v-for=\"(item, index) in wheatContainerList\" :key=\"index\" :label=\"item.holderName\" :value=\"item.holderId\" ></el-option>\r\n                  </el-select>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              width=\"180\"\r\n              label=\"物料批次\">\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"required\">\r\n                  <i class=\"reqI\">*</i>\r\n                  <el-input v-model=\"scope.row.batch\" maxlength='10' size=\"small\" :disabled=\"!isRedact || scope.row.status === 'submit' || scope.row.status === 'checked'\" placeholder=\"手工录入\"></el-input>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              width=\"160\"\r\n              label=\"小麦领用数\">\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"required\">\r\n                  <i class=\"reqI\">*</i>\r\n                  <el-input type='number' v-model.number=\"scope.row.wheatWeight\" size=\"small\" :disabled=\"!isRedact || scope.row.status === 'submit' || scope.row.status === 'checked'\" placeholder=\"手工录入\"></el-input>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"单位\"\r\n              width=\"80\">\r\n              <template slot-scope=\"scope\">\r\n                <!--<span>{{scope.row.expContinue = (scope.row.expEndDate-scope.row.expStartDate)/60000}}</span>-->\r\n                <span>{{ scope.row.weightUnit = 'KG'}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"备注\"\r\n              width=\"160\">\r\n              <template slot-scope=\"scope\">\r\n                <!--<span>{{scope.row.expContinue = (scope.row.expEndDate-scope.row.expStartDate)/60000}}</span>-->\r\n                <el-input v-model.trim=\"scope.row.remark\" size=\"small\" :disabled=\"!isRedact || scope.row.status === 'submit' || scope.row.status === 'checked'\" placeholder=\"手工录入\"></el-input>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              fixed=\"right\"\r\n              label=\"操作\"\r\n              width=\"60\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button type=\"danger\" icon=\"el-icon-delete\" circle size=\"small\" :disabled=\"!isRedact || scope.row.status === 'submit' || scope.row.status === 'checked'\"  @click=\"dellistbomS(scope.row)\"></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <el-row style=\"margin-top:20px;\">\r\n            <el-col>\r\n              <div><span>领用数合计：</span>{{totalInstock}} KG</div>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!--审批-->\r\n    <el-row >\r\n      <el-col :span=\"24\">\r\n        <auditLog :tableData=\"readAudit\"></auditLog>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { WHT_API, BASICDATA_API, SYSTEMSETUP_API } from '@/api/api'\r\nexport default {\r\n  data () {\r\n    return {\r\n      materialDictList: [],\r\n      wheatContainerList: [],\r\n      readAudit: [],\r\n      materielDataList: []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getMaterialDictList()\r\n    this.getWheatContainerList()\r\n    // this.getMaterielDataList()\r\n  },\r\n  props: {\r\n    isRedact: Boolean,\r\n    applyMaterielState: String,\r\n    order: Object\r\n  },\r\n  methods: {\r\n    // 保存\r\n    saveMateriel (resolve) {\r\n      if (this.materielDataList.length > 0) {\r\n        this.materielDataList.forEach((item) => {\r\n          // 应产品要求，如果对不通过数据做修改保存操作，页签状态还是未通过，故此处不做状态赋值。\r\n          // if (item.status !== 'submit' || item.status !== 'checked') {\r\n          //   item.status = 'saved'\r\n          // }\r\n          // 新增行赋值saved\r\n          if (typeof item.status === 'undefined' || item.status == null || item.status.trim() === '') {\r\n            item.status = 'saved'\r\n          }\r\n        })\r\n        this.$http(WHT_API.APPLYMATERIELSAVE_API, 'POST', this.materielDataList).then(({data}) => {\r\n          if (data.code === 0) {\r\n          } else {\r\n            this.$message.error(data.msg)\r\n          }\r\n          if (resolve) {\r\n            resolve('resolve')\r\n          }\r\n        }).catch((error) => {\r\n          console.log('catch data::', error)\r\n        })\r\n      } else {\r\n        if (resolve) {\r\n          resolve('resolve')\r\n        }\r\n      }\r\n    },\r\n    // 物料提交\r\n    submitMateriel (resolve) {\r\n      if (this.materielDataList.length > 0) {\r\n        this.materielDataList.forEach((item) => {\r\n          if (item.status !== 'checked') {\r\n            item.status = 'submit'\r\n          }\r\n        })\r\n        this.$http(`${WHT_API.APPLYMATERIELSUBMIT_API}`, 'POST', this.materielDataList).then(({data}) => {\r\n          if (data.code === 0) {\r\n          } else {\r\n            this.$message.error(data.msg)\r\n          }\r\n          if (resolve) {\r\n            resolve('resolve')\r\n          }\r\n        }).catch((error) => {\r\n          console.log('catch data::', error)\r\n        })\r\n      } else {\r\n        if (resolve) {\r\n          resolve('resolve')\r\n        }\r\n      }\r\n    },\r\n    validate () {\r\n      if (this.materielDataList === undefined || this.materielDataList.length === 0) {\r\n        this.$message.error('物料领用未录入数据')\r\n        return false\r\n      }\r\n      for (let item of this.materielDataList) {\r\n        if (item.delFlag === '0') {\r\n          if (item.materialCode == null || item.materialCode.trim() === '') {\r\n            this.$message.error('物料不能为空')\r\n            return false\r\n          }\r\n          if (item.deviceId == null || item.deviceId === '') {\r\n            this.$message.error('粮仓不能为空')\r\n            return false\r\n          }\r\n          if (item.batch == null || item.batch.trim() === '') {\r\n            this.$message.error('物料批次不能为空')\r\n            return false\r\n          }\r\n          if (item.batch.trim().length > 10) {\r\n            this.$message.error('物料批次长度不能超过10')\r\n            return false\r\n          }\r\n          if (item.wheatWeight === '') {\r\n            this.$message.error('小麦领用数不能为空')\r\n            return false\r\n          }\r\n          if (item.wheatWeight <= 0) {\r\n            this.$message.error('小麦领用数必须大于0')\r\n            return false\r\n          }\r\n        }\r\n      }\r\n      return true\r\n    },\r\n    // 粮仓\r\n    getWheatContainerList () {\r\n      this.wheatContainerList = []\r\n      if (typeof this.order === 'undefined' || typeof this.order.workShopName === 'undefined') {\r\n        return\r\n      }\r\n      let params = {\r\n        type: 'holder_type',\r\n        holder_type: '002',\r\n        // holder_no: '001',\r\n        pageSize: 9999,\r\n        workShopName: this.order.workShopName,\r\n        currPage: 1\r\n      }\r\n      this.$http(`${BASICDATA_API.CONTAINERLIST_API}`, 'POST', params).then(({data}) => {\r\n        if (data.code === 0) {\r\n          this.wheatContainerList = data.page.list\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      }).catch((error) => {\r\n        console.log('catch data::', error)\r\n      })\r\n    },\r\n    // 物料选项\r\n    getMaterialDictList () {\r\n      this.materialDictList = []\r\n      this.$http(`${SYSTEMSETUP_API.PARAMETERLIST_API}?type=CM_material`, 'POST').then(({data}) => {\r\n        if (data.code === 0) {\r\n          this.materialDictList = data.dicList\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      }).catch((error) => {\r\n        console.log('catch data::', error)\r\n      })\r\n    },\r\n    // 获取物料数据\r\n    getMaterielDataList (orderId) {\r\n      this.materielDataList = []\r\n      this.readAudit = []\r\n      // if (typeof this.order === 'undefined' || typeof this.order.orderId === 'undefined') {\r\n      //   return\r\n      // }\r\n      let inState = ''\r\n      this.$http(`${WHT_API.APPLYMATERIELLIST_API}`, 'POST', {order_id: orderId}).then(({data}) => {\r\n        if (data.code === 0) {\r\n          // success\r\n          this.materielDataList = data.listForm\r\n          this.readAudit = data.listApproval\r\n          let no = 0\r\n          let sub = 0\r\n          let che = 0\r\n          let sav = 0\r\n          this.materielDataList.forEach((item) => {\r\n            if (item.status === 'noPass') {\r\n              no = no + 1\r\n            } else if (item.status === 'submit') {\r\n              sub = sub + 1\r\n            } else if (item.status === 'checked') {\r\n              che = che + 1\r\n            } else if (item.status === 'saved') {\r\n              sav = sav + 1\r\n            }\r\n          })\r\n          if (no > 0) {\r\n            inState = 'noPass'\r\n          } else if (sub > 0) {\r\n            inState = 'submit'\r\n          } else if (sav > 0) {\r\n            inState = 'saved'\r\n          } else if (che > 0) {\r\n            inState = 'checked'\r\n          }\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      }).catch((error) => {\r\n        this.$message.error(error)\r\n      }).finally(() => {\r\n        this.$emit('setApplyMaterielState', inState)\r\n      })\r\n    },\r\n    // 新增\r\n    addNewRecord () {\r\n      // 复制上一条数据的手动录入部分\r\n      let lastArr = this.materielDataList.filter(item => { return item.delFlag === '0' })\r\n      let last = lastArr && lastArr.length > 0 ? lastArr[lastArr.length - 1] : null\r\n      this.materielDataList.push({\r\n        id: '',\r\n        orderId: this.order.orderId,\r\n        // 物料编码默认值\r\n        materialCode: last ? last.materialCode : '',\r\n        materialName: last ? last.materialName : '',\r\n        // 粮仓号\r\n        deviceId: last ? last.deviceId : '',\r\n        // 粮仓名称\r\n        holderName: last ? last.holderName : '',\r\n        // 批次号\r\n        batch: last ? last.batch : '',\r\n        wheatWeight: last ? last.wheatWeight : 0,\r\n        weightUnit: 'KG',\r\n        remark: last ? last.remark : '',\r\n        delFlag: '0'\r\n      })\r\n    },\r\n    // 删除\r\n    dellistbomS (row) {\r\n      row.delFlag = '1'\r\n    },\r\n    //  RowDelFlag\r\n    rowDelFlag ({row, rowIndex}) {\r\n      if (row.delFlag === '1') {\r\n        return 'rowDel'\r\n      } else {\r\n        return ''\r\n      }\r\n    },\r\n    changeWheatContainer (row) {\r\n      let ele = this.wheatContainerList.find((item) => item.holderId === row.deviceId)\r\n      if (ele) {\r\n        row.holderName = ele.holderName\r\n      }\r\n    },\r\n    changeProduct: function (row) {\r\n      let ele = this.materialDictList.find((item) => item.code === row.materialCode)\r\n      if (ele) {\r\n        row.materialName = ele.value\r\n      }\r\n    }\r\n    // saveOrSubmitMateriel (str, resolve) {\r\n    //   if (this.materielDataList.length > 0) {\r\n    //     console.log(this.materielDataList)\r\n    //     if (resolve) {\r\n    //       resolve('resolve')\r\n    //     }\r\n    //   }\r\n    // }\r\n  },\r\n  computed: {\r\n    totalInstock: function () {\r\n      let total = 0\r\n      for (let ele of this.materielDataList) {\r\n        if (ele.delFlag === '0' && typeof ele.wheatWeight === 'number') {\r\n          total += parseFloat(ele.wheatWeight)\r\n        }\r\n      }\r\n      return total\r\n    }\r\n  },\r\n  watch: {\r\n  },\r\n  components: {\r\n    AuditLog: resolve => {\r\n      require(['@/views/components/AuditLog'], resolve)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/page/DataEntry/FryWheat/common/applyMateriel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',{attrs:{\"body-style\":\"padding-top:10px;\"}},[_c('div',{staticClass:\"clearfix topBox\"},[_c('div',{staticClass:\"btn\",staticStyle:{\"margin-bottom\":\"8px\"}},[_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":!_vm.isRedact || _vm.applyMaterielState == 'submit' || _vm.applyMaterielState == 'checked'},on:{\"click\":function($event){return _vm.addNewRecord()}}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"})],1)]),_vm._v(\" \"),_c('el-table',{ref:\"table1\",staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"20px\"},attrs:{\"header-row-class-name\":\"tableHead\",\"data\":_vm.materielDataList,\"row-class-name\":_vm.rowDelFlag,\"border\":\"\",\"tooltip-effect\":\"dark\"}},[_c('el-table-column',{attrs:{\"label\":\"物料\",\"width\":\"220\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"required\"},[_c('i',{staticClass:\"reqI\"},[_vm._v(\"*\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"value-key\":\"materialCode\",\"placeholder\":\"请选择物料\",\"disabled\":!_vm.isRedact || scope.row.status === 'submit' || scope.row.status === 'checked',\"size\":\"small\"},on:{\"change\":function($event){return _vm.changeProduct(scope.row)}},model:{value:(scope.row.materialCode),callback:function ($$v) {_vm.$set(scope.row, \"materialCode\", $$v)},expression:\"scope.row.materialCode\"}},_vm._l((_vm.materialDictList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.code + ' ' + item.value,\"value\":item.code}})}),1)],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"粮仓\",\"show-overflow-tooltip\":true,\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"required\"},[_c('i',{staticClass:\"reqI\"},[_vm._v(\"*\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"value-key\":\"deviceId\",\"placeholder\":\"请选择粮仓\",\"disabled\":!_vm.isRedact || scope.row.status === 'submit' || scope.row.status === 'checked',\"size\":\"small\"},on:{\"change\":function($event){return _vm.changeWheatContainer(scope.row)}},model:{value:(scope.row.deviceId),callback:function ($$v) {_vm.$set(scope.row, \"deviceId\", $$v)},expression:\"scope.row.deviceId\"}},_vm._l((_vm.wheatContainerList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.holderName,\"value\":item.holderId}})}),1)],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"180\",\"label\":\"物料批次\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"required\"},[_c('i',{staticClass:\"reqI\"},[_vm._v(\"*\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"maxlength\":\"10\",\"size\":\"small\",\"disabled\":!_vm.isRedact || scope.row.status === 'submit' || scope.row.status === 'checked',\"placeholder\":\"手工录入\"},model:{value:(scope.row.batch),callback:function ($$v) {_vm.$set(scope.row, \"batch\", $$v)},expression:\"scope.row.batch\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"160\",\"label\":\"小麦领用数\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"required\"},[_c('i',{staticClass:\"reqI\"},[_vm._v(\"*\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"number\",\"size\":\"small\",\"disabled\":!_vm.isRedact || scope.row.status === 'submit' || scope.row.status === 'checked',\"placeholder\":\"手工录入\"},model:{value:(scope.row.wheatWeight),callback:function ($$v) {_vm.$set(scope.row, \"wheatWeight\", _vm._n($$v))},expression:\"scope.row.wheatWeight\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"单位\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.weightUnit = 'KG'))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"备注\",\"width\":\"160\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":!_vm.isRedact || scope.row.status === 'submit' || scope.row.status === 'checked',\"placeholder\":\"手工录入\"},model:{value:(scope.row.remark),callback:function ($$v) {_vm.$set(scope.row, \"remark\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"scope.row.remark\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"60\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"small\",\"disabled\":!_vm.isRedact || scope.row.status === 'submit' || scope.row.status === 'checked'},on:{\"click\":function($event){return _vm.dellistbomS(scope.row)}}})]}}])})],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-col',[_c('div',[_c('span',[_vm._v(\"领用数合计：\")]),_vm._v(_vm._s(_vm.totalInstock)+\" KG\")])])],1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('auditLog',{attrs:{\"tableData\":_vm.readAudit}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-8fd5b3c8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/page/DataEntry/FryWheat/common/applyMateriel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8fd5b3c8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./applyMateriel.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./applyMateriel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./applyMateriel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8fd5b3c8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./applyMateriel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8fd5b3c8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/page/DataEntry/FryWheat/common/applyMateriel.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}