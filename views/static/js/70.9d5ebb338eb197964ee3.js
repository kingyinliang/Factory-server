webpackJsonp([70],{"/zlw":function(t,e){},Sa3d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("P9l9"),o=a("Lna1"),s={name:"index",data:function(){return{lodingStatus1:!1,dataListLoading:!1,visible:!1,factory:[],workshop:[],productline:[],Text:"",MoveReas:[],plantList:{orderNo:"",factory:"",workShop:"",productLine:"",productDate:new Date(new Date-864e5).getFullYear().toString()+"-"+(new Date(new Date-864e5).getMonth()+1>=10?(new Date(new Date-864e5).getMonth()+1).toString():"0"+(new Date(new Date-864e5).getMonth()+1))+"-"+(new Date(new Date-864e5).getDate()>=10?new Date(new Date-864e5).getDate().toString():"0"+new Date(new Date-864e5).getDate()),pstngDate:(new Date).getFullYear().toString()+"-"+((new Date).getMonth()+1>=10?((new Date).getMonth()+1).toString():"0"+((new Date).getMonth()+1))+"-"+((new Date).getDate()>=10?(new Date).getDate().toString():"0"+(new Date).getDate()),headerTxt:"",status:"",currPage:1,pageSize:10,totalCount:0},AuditList:[],multipleSelection:[]}},watch:{"plantList.factory":function(t,e){this.Getdeptbyid(t)},"plantList.workShop":function(t,e){this.GetParentline(t)},lodingStatus:function(t,e){console.log(t)}},mounted:function(){this.Getdeptcode(),this.GetMoveReas(),Object(o.f)(this.$)},methods:{GetAuditList:function(t){var e=this;t&&(this.plantList.currPage=1),this.plantList.headerTxt="",this.dataListLoading=!0,this.$http(""+l.b.AUDITISSUELIST_API,"POST",this.plantList).then(function(t){var a=t.data;0===a.code?(e.AuditList=a.page.list,e.plantList.currPage=a.page.currPage,e.plantList.pageSize=a.page.pageSize,e.plantList.totalCount=a.page.totalCount):e.$message.error(a.msg),e.dataListLoading=!1})},GetMoveReas:function(){var t=this;this.$http(l.k.PARAMETERLIST_API+"?type=move_reas","POST").then(function(e){var a=e.data;0===a.code?t.MoveReas=a.dicList:t.$message.error(a.msg)})},Getdeptcode:function(){var t=this;this.$http(l.c.FINDORG_API+"?code=factory","POST").then(function(e){var a=e.data;0===a.code?t.factory=a.typeList:t.$message.error(a.msg)})},Getdeptbyid:function(t){var e=this;this.plantList.workShop="",this.plantList.productLine="",t?this.$http(""+l.c.FINDORGBYID_API,"POST",{deptId:t}).then(function(t){var a=t.data;0===a.code?e.workshop=a.typeList:e.$message.error(a.msg)}):this.workshop=[]},GetParentline:function(t){var e=this;this.plantList.productLine="",t?this.$http(""+l.c.FINDORGBYPARENTID_API,"POST",{parentId:t}).then(function(t){var a=t.data;0===a.code?e.productline=a.childList:e.$message.error(a.msg)}):this.productline=[]},handleSelectionChange:function(t){var e=this;this.multipleSelection=[],t.forEach(function(t,a){e.multipleSelection.push(t)})},SetPostgDate:function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},checkboxT:function(t){return"checked"===t.status&&"1"===t.interfaceReturnStatus||"noPass"===t.status?0:1},redact:function(t){var e=this;t.redact?(t.pstngDate=this.plantList.pstngDate,t.status="",this.lodingStatus1=!0,this.$http(""+l.b.AUDITISSUEUPDATE_API,"POST",[t]).then(function(a){var l=a.data;e.lodingStatus1=!1,0===l.code?(e.$message.success("操作成功"),t.redact=!1,e.AuditList.splice(e.AuditList.length,0,{}),e.AuditList.splice(e.AuditList.length-1,1)):e.$message.error(l.msg),e.GetAuditList()}).catch(function(){e.$message.error("网络错误"),e.lodingStatus1=!1})):(t.redact=!0,this.AuditList.splice(this.AuditList.length,0,{}),this.AuditList.splice(this.AuditList.length-1,1))},repulseAutios:function(){this.multipleSelection.length<=0?this.$message.error("请选择订单"):this.visible=!0},repulseAutio:function(){var t=this;this.Text.length<=0?this.$message.error("请填写不通过原因"):this.$confirm("确认审核不通过, 是否继续?","审核不通过",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.multipleSelection.forEach(function(e){e.status="noPass",e.memo=t.Text,e.pstngDate=t.plantList.pstngDate}),t.lodingStatus1=!0,t.$http(""+l.b.AUDITISSUEUPDATE_API,"POST",t.multipleSelection).then(function(e){var a=e.data;t.lodingStatus1=!1,0===a.code?(t.visible=!1,t.$message.success("操作成功"),t.GetAuditList()):t.$message.error(a.msg)}).catch(function(){t.$message.error("网络错误"),t.lodingStatus1=!1})})},subAutio:function(){var t=this;this.multipleSelection.length<=0?this.$message.error("请选择订单"):this.$confirm("确认审核通过, 是否继续?","审核通过",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.multipleSelection.forEach(function(e){e.status="checked",e.memo="审核通过",e.pstngDate=t.plantList.pstngDate,e.headerTxt=t.plantList.headerTxt}),t.lodingStatus1=!0,t.$http(""+l.b.AUDITISSUEUPDATE_API,"POST",t.multipleSelection).then(function(e){var a=e.data;t.lodingStatus1=!1,0===a.code?(t.$message.success("操作成功"),t.GetAuditList()):(t.$message.error(a.msg),t.GetAuditList())}).catch(function(){t.$message.error("网络错误"),t.lodingStatus1=!1})})},handleSizeChange:function(t){this.plantList.pageSize=t,this.GetAuditList()},handleCurrentChange:function(t){this.plantList.currPage=t,this.GetAuditList()}},computed:{},components:{}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.lodingStatus,expression:"lodingStatus",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[a("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.lodingStatus1,expression:"lodingStatus1",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"main"},[a("el-card",{staticClass:"searchCard"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",[a("el-form",{staticClass:"topforms",attrs:{model:t.plantList,size:"small",inline:!0,"label-position":"right","label-width":"85px"}},[a("el-form-item",{attrs:{label:"工厂："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.plantList.factory,callback:function(e){t.$set(t.plantList,"factory",e)},expression:"plantList.factory"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.factory,function(t,e){return a("el-option",{key:e,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"车间："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.plantList.workShop,callback:function(e){t.$set(t.plantList,"workShop",e)},expression:"plantList.workShop"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.workshop,function(t,e){return a("el-option",{key:e,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"产线："}},[a("el-select",{attrs:{placeholder:"产线"},model:{value:t.plantList.productLine,callback:function(e){t.$set(t.plantList,"productLine",e)},expression:"plantList.productLine"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.productline,function(t,e){return a("el-option",{key:e,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"订单号："}},[a("el-input",{attrs:{placeholder:"订单号"},model:{value:t.plantList.orderNo,callback:function(e){t.$set(t.plantList,"orderNo",e)},expression:"plantList.orderNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"生产日期："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择","value-format":"yyyy-MM-dd"},model:{value:t.plantList.productDate,callback:function(e){t.$set(t.plantList,"productDate",e)},expression:"plantList.productDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"订单状态："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.plantList.status,callback:function(e){t.$set(t.plantList,"status",e)},expression:"plantList.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),a("el-option",{attrs:{label:"未审核",value:"submit"}}),t._v(" "),a("el-option",{attrs:{label:"审核通过",value:"checked"}}),t._v(" "),a("el-option",{attrs:{label:"审核不通过",value:"noPass"}}),t._v(" "),a("el-option",{attrs:{label:"接口失败",value:"0"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"过账日期："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择","value-format":"yyyy-MM-dd"},model:{value:t.plantList.pstngDate,callback:function(e){t.$set(t.plantList,"pstngDate",e)},expression:"plantList.pstngDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"抬头文本："}},[a("el-input",{attrs:{placeholder:"抬头文本"},model:{value:t.plantList.headerTxt,callback:function(e){t.$set(t.plantList,"headerTxt",e)},expression:"plantList.headerTxt"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"67px"}},[t.isAuth("verify:material:list")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.GetAuditList(!0)}}},[t._v("查询")]):t._e(),t._v(" "),t.isAuth("verify:material:update")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.subAutio()}}},[t._v("审核通过")]):t._e(),t._v(" "),t.isAuth("verify:material:update")?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.repulseAutios()}}},[t._v("审核不通过")]):t._e()],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"toggleSearchBottom"},[a("i",{staticClass:"el-icon-caret-top"})])],1)],1),t._v(" "),a("div",{staticClass:"main",staticStyle:{"padding-top":"0"}},[a("el-card",{staticClass:"tableCard"},[a("div",{staticClass:"toggleSearchTop"},[a("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],ref:"table1",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{"header-row-class-name":"tableHead",data:t.AuditList,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:t.checkboxT,width:"34"}}),t._v(" "),a("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s("submit"===e.row.status?"未审核":"checked"===e.row.status?"0"===e.row.interfaceReturnStatus?"接口失败":"审核通过":"noPass"===e.row.status?"审核不通过":"")+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"productDate",label:"生产日期","show-overflow-tooltip":!0,width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"生产订单号","show-overflow-tooltip":!0,width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"生产物料","show-overflow-tooltip":!0,width:"360"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.materialCodeH+" "+e.row.materialNameH)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"planOutput",label:"计划生产数量",width:"105"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outputUnitName",label:"单位",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"组件物料","show-overflow-tooltip":!0,width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.materialCode+" "+e.row.materialName)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"entryQnt",label:"发料组件数量",width:"105"}}),t._v(" "),a("el-table-column",{attrs:{prop:"entryUomName",label:"单位",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"物料批次","show-overflow-tooltip":!0,width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.redact?a("el-input",{attrs:{size:"small"},model:{value:e.row.batch,callback:function(a){t.$set(e.row,"batch",a)},expression:"scope.row.batch"}}):a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.row.batch,callback:function(a){t.$set(e.row,"batch",a)},expression:"scope.row.batch"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"potNo",label:"领用罐号","show-overflow-tooltip":!0,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"filterDate",label:"过滤日期","show-overflow-tooltip":!0,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"出库库位",width:"78"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.redact?a("el-input",{attrs:{size:"small"},model:{value:e.row.stgeLoc,callback:function(a){t.$set(e.row,"stgeLoc",a)},expression:"scope.row.stgeLoc"}}):a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.row.stgeLoc,callback:function(a){t.$set(e.row,"stgeLoc",a)},expression:"scope.row.stgeLoc"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"workShopRemark",label:"车间备注","show-overflow-tooltip":!0,width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"移动类型",width:"78"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.redact?a("el-input",{attrs:{size:"small"},model:{value:e.row.moveType,callback:function(a){t.$set(e.row,"moveType",a)},expression:"scope.row.moveType"}}):a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.row.moveType,callback:function(a){t.$set(e.row,"moveType",a)},expression:"scope.row.moveType"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"移动原因",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.redact?a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.row.moveReas,callback:function(a){t.$set(e.row,"moveReas",a)},expression:"scope.row.moveReas"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.MoveReas,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.code}})})],2):a("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:""},model:{value:e.row.moveReas,callback:function(a){t.$set(e.row,"moveReas",a)},expression:"scope.row.moveReas"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.MoveReas,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.code}})})],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stckType",label:"库存类型",width:"78"}}),t._v(" "),a("el-table-column",{attrs:{prop:"interfaceReturn",label:"接口回写","show-overflow-tooltip":!0,width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"审核意见","show-overflow-tooltip":!0,width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"verifyMan","show-overflow-tooltip":!0,label:"审核人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"verifyDate",label:"审核时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.redact?a("el-input",{attrs:{size:"small"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}}):a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return["checked"!==e.row.status&&"noPass"!==e.row.status&&t.isAuth("verify:material:update")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.redact(e.row)}}},[t._v(t._s(e.row.redact?"保存":"编辑"))]):t._e()]}}])})],1),t._v(" "),a("el-row",[a("el-pagination",{attrs:{"current-page":t.plantList.currPage,"page-sizes":[10,15,20],"page-size":t.plantList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.plantList.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"审核拒绝","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("p",{staticStyle:{"line-height":"42px"}},[t._v("请填写不通过原因")]),t._v(" "),a("el-input",{staticClass:"textarea",staticStyle:{width:"100%",height:"200px"},attrs:{type:"textarea",rows:6},model:{value:t.Text,callback:function(e){t.Text=e},expression:"Text"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.repulseAutio()}}},[t._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(s,i,!1,function(t){a("/zlw")},null,null);e.default=n.exports}});
//# sourceMappingURL=70.9d5ebb338eb197964ee3.js.map