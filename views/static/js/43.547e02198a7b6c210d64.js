webpackJsonp([43],{"4pwj":function(t,e){},VlMa:function(t,e){},y5ab:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=a("P9l9"),s=a("Lna1"),n=a("jO17"),l=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),i=this&&this.__decorate||function(t,e,a,o){var r,s=arguments.length,n=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var l=t.length-1;l>=0;l--)(r=t[l])&&(n=(s<3?r(n):s>3?r(e,a,n):r(e,a))||n);return s>3&&n&&Object.defineProperty(e,a,n),n},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.params={factoryId:"",factoryName:"",workshopId:"",workshopName:"",startDate:Object(s.c)(new Date,"yyyy-MM-dd"),endDate:Object(s.c)(new Date,"yyyy-MM-dd")},e.factoryList=[],e.workshopList=[],e.dataList=[],e.searched=!1,e.currPage=1,e.pageSize=10,e.totalCount=0,e.plantList={},e}return l(e,t),e.prototype.mounted=function(){this.getFactory(),this.getWorkshop(this.params.factoryId)},e.prototype.isAuth=function(t){return n.b.prototype.isAuth(t)},e.prototype.changeOptions=function(t){var e=this;if("factory"===t){var a=this.factoryList.find(function(t){return t.deptId===e.params.factoryId});this.params.factoryName=a?a.deptName:""}else if("workshop"===t){a=this.workshopList.find(function(t){return t.deptId===e.params.workshopId});this.params.workshopName=a?a.deptName:""}},e.prototype.getFactory=function(){var t=this;this.factoryList=[],n.b.prototype.$http(r.c.FINDORG_API+"?code=factory","POST",{},!1,!1,!1).then(function(e){0===e.data.code?t.factoryList=e.data.typeList:t.$message.error(e.data.msg)})},e.prototype.getWorkshop=function(t){var e=this;this.workshopList=[],t&&n.b.prototype.$http(""+r.c.FINDORGBYID_API,"POST",{deptId:t,deptName:"制曲"},!1,!1,!1).then(function(t){0===t.data.code?e.workshopList=t.data.typeList:e.$message.error(t.data.msg)})},e.prototype.exportExcel=function(){this.plantList={factory:this.params.factoryId,workShop:this.params.workshopId,commitDateOne:this.params.startDate,commitDateTwo:this.params.endDate};Object(s.d)(""+r.i.KJMAKINGPRO_EXCEL_API,"制曲生产报表",this)},e.prototype.getDataList=function(){this.searched=!0;var t={factory:this.params.factoryId,workshop:this.params.workshopId,commitDateOne:this.params.startDate,commitDateTwo:this.params.endDate,currPage:this.currPage+"",pageSize:this.pageSize+""};this.retrieveDataList(t)},e.prototype.retrieveDataList=function(t){var e=this;this.dataList=[],n.b.prototype.$http(""+r.i.KJMAKINGPRO_LIST_API,"POST",t).then(function(t){0===t.data.code?(e.dataList=t.data.page.list,e.totalCount=t.data.page.totalCount):e.$message.error(t.data.msg)}).catch(function(t){console.log("catch data::",t)})},e.prototype.handleSizeChange=function(t){this.pageSize=t,this.getDataList()},e.prototype.handleCurrentChange=function(t){this.currPage=t,this.getDataList()},e.prototype.onChangeValue=function(t,e){this.searched=!1},e.prototype.onFactoryValue=function(t,e){this.params.workshopId="",this.params.workshopName="",this.getWorkshop(t)},i([Object(n.c)("params",{deep:!0})],e.prototype,"onChangeValue",null),i([Object(n.c)("params.factoryId")],e.prototype,"onFactoryValue",null),e=i([Object(n.a)({components:{}})],e)}(n.b),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.lodingStatus,expression:"lodingStatus",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"main"},[a("el-card",{staticClass:"newCard"},[a("el-row",{staticStyle:{"border-bottom":"1px solid #E9E9E9","margin-bottom":"12px"},attrs:{type:"flex"}},[a("el-col",[a("el-form",{attrs:{model:t.params,size:"small",inline:!0,"label-position":"right","label-width":"70px"}},[a("el-form-item",{attrs:{label:"生产工厂："}},[a("el-select",{staticClass:"selectwpx",staticStyle:{width:"140px"},on:{change:function(e){return t.changeOptions("factory")}},model:{value:t.params.factoryId,callback:function(e){t.$set(t.params,"factoryId",e)},expression:"params.factoryId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.factoryList,function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"生产车间："}},[a("el-select",{staticClass:"selectwpx",staticStyle:{width:"140px"},on:{change:function(e){return t.changeOptions("workshop")}},model:{value:t.params.workshopId,callback:function(e){t.$set(t.params,"workshopId",e)},expression:"params.workshopId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.workshopList,function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"生产日期："}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.params.startDate,callback:function(e){t.$set(t.params,"startDate",e)},expression:"params.startDate"}}),t._v("\n                - "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.params.endDate,callback:function(e){t.$set(t.params,"endDate",e)},expression:"params.endDate"}})],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{width:"340px"}},[a("el-row",{staticClass:"rowButton"},[t.isAuth("report:formh:exportKjmProductList")?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.exportExcel()}}},[t._v("导出")]):t._e(),t._v(" "),t.isAuth("report:formh:kjmProductList")?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getDataList()}}},[t._v("查询")]):t._e()],1)],1)],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.searched,expression:"searched"}],staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{"min-height":"320px"}},[a("el-table",{attrs:{border:"","header-row-class-name":"tableHead",data:t.dataList}},[a("el-table-column",{attrs:{label:"制曲日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.inKjmDate)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"工厂","show-overflow-tooltip":!0,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.factoryName)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"车间","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.workShopName)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"豆粕量(KG)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allPlup)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"麦粉量(KG)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allWheat)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"盐水量(方)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allSalt)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"菌种量(盒)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allMat)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"投料批数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allTPatch)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"投料量(方)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allOutMat)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出曲批数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allOutPatch)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出曲量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.allOut)+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"曲房号","show-overflow-tooltip":!0,width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.houseStr)+"\n              ")]}}])})],1),t._v(" "),a("el-row",{staticStyle:{"font-size":"14px","line-height":"30px","margin-top":"10px"}})],1),t._v(" "),a("el-row",[a("el-pagination",{attrs:{"current-page":t.currPage,"page-sizes":[10,15,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)])],1)},staticRenderFns:[]};var u=a("C7Lr")(c,p,!1,function(t){a("4pwj"),a("VlMa")},"data-v-723f84fd",null);e.default=u.exports}});
//# sourceMappingURL=43.547e02198a7b6c210d64.js.map