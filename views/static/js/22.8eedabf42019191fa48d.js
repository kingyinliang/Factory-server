webpackJsonp([22,107],{"/P8M":function(e,t){},"911z":function(e,t){},"9M57":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("woOf"),a=o.n(r),l=o("P9l9"),i={name:"ContaninerAddorUpdate",data:function(){return{conid:"",visible:!1,dictList:[],dataForm:{holderType:"",holderNo:"",holderName:"",holderHold:0,holderPatch:"",holderArea:"",factory:"",deptId:""},dataForm1:{holderType:"",holderNo:"",holderName:"",holderHold:0,holderPatch:"",holderArea:"",factory:"",deptId:""},factoryId:"",factoryList:[],workshop:[],submitType:!0,dataRule:{holderType:[{required:!0,message:"容器类型不能为空",trigger:"blur"}],holderNo:[{required:!0,message:"容器号不能为空",trigger:"blur"}],factory:[{required:!0,message:"归属工厂不能为空",trigger:"blur"}],deptId:[{required:!0,message:"归属车间不能为空",trigger:"blur"}]}}},mounted:function(){this.getDictList(),this.getFactoryList()},methods:{closeDialog:function(){this.visible=!1,this.$refs.dataForm.resetFields()},init:function(e){var t=this;e?(this.conid=e,this.$http(l.c.CONTAINERDETAIL_API+"/"+e,"POST").then(function(e){var o=e.data;0===o.code?(t.dataForm.holderId=o.sysHolder.holderId,t.dataForm.holderType=o.sysHolder.holderType,t.dataForm.holderNo=o.sysHolder.holderNo,t.dataForm.holderName=o.sysHolder.holderName,t.dataForm.holderHold=o.sysHolder.holderHold,t.dataForm.holderPatch=o.sysHolder.holderPatch,t.dataForm.holderArea=o.sysHolder.holderArea,t.dataForm.factory=o.sysHolder.factory,t.dataForm.deptId=o.sysHolder.deptId,t.Getdeptcode(o.sysHolder.factory,o.sysHolder.deptId)):t.$message.error(o.msg),t.visible=!0})):(this.dataForm=a()({},this.dataForm1),this.factoryId="",this.conid=0,this.visible=!0)},getFactoryList:function(){var e=this;this.$http(l.c.FINDORG_API+"?code=factory","POST",{},!1,!1,!1).then(function(t){0===t.data.code?e.factoryList=t.data.typeList:e.$message.error(t.data.msg)})},Getdeptcode:function(e,t){var o=this;if(e){if(t){var r=this;setTimeout(function(){r.dataForm.deptId=t},500)}else this.dataForm.deptId="";this.$http(""+l.c.FINDORGBYID_API,"POST",{deptId:e}).then(function(e){var t=e.data;0===t.code?(console.log("------------------------------------------------------",t.typeList.length),o.workshop=t.typeList):o.$message.error(t.msg)})}},getDictList:function(){var e=this;this.$http(l.k.PARAMETERLIST_API+"?type=holder_type","POST").then(function(t){var o=t.data;0===o.code?e.dictList=o.dicList:e.$message.error(o.msg)})},dataFormSubmit:function(){var e=this;this.submitType&&(this.submitType=!1,this.$refs.dataForm.validate(function(t){if(!t)return e.submitType=!0,console.log("error submit!!"),!1;e.conid?e.$http(""+l.c.CONTAINERUPDATE_API,"POST",e.dataForm).then(function(t){var o=t.data;0===o.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.submitType=!0,e.visible=!1,e.$emit("refreshDataList")}}):(e.submitType=!0,e.$message.error(o.msg))}):e.$http(""+l.c.CONTAINERADD_API,"POST",e.dataForm).then(function(t){var o=t.data;0===o.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.submitType=!0,e.visible=!1,e.$emit("refreshDataList")}}):(e.submitType=!0,e.$message.error(o.msg))})}))}},watch:{"dataForm.factory":function(e){console.log("****************1*********************"),this.Getdeptcode(e,!1)},workshop:function(e){console.log("****************2*********************")}},computed:{},components:{}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.conid?"修改容器":"新增容器","close-on-click-modal":!1,visible:e.visible},on:{close:e.closeDialog,"update:visible":function(t){e.visible=t}}},[o("div",[o("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()},submit:function(e){e.preventDefault()}}},[o("el-form-item",{attrs:{label:"容器类型：",prop:"holderType"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dataForm.holderType,callback:function(t){e.$set(e.dataForm,"holderType",t)},expression:"dataForm.holderType"}},[o("el-option",{attrs:{label:"",value:""}}),e._v(" "),e._l(e.dictList,function(e,t){return o("el-option",{key:t,attrs:{label:e.value,value:e.code}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"容器号：",prop:"holderNo"}},[o("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.dataForm.holderNo,callback:function(t){e.$set(e.dataForm,"holderNo",t)},expression:"dataForm.holderNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"容器描述："}},[o("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.dataForm.holderName,callback:function(t){e.$set(e.dataForm,"holderName",t)},expression:"dataForm.holderName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"容器量："}},[o("el-input",{attrs:{type:"number",placeholder:"手动输入",min:"0"},model:{value:e.dataForm.holderHold,callback:function(t){e.$set(e.dataForm,"holderHold",t)},expression:"dataForm.holderHold"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"批数："}},[o("el-input",{attrs:{type:"number",placeholder:"手动输入",min:"0"},model:{value:e.dataForm.holderPatch,callback:function(t){e.$set(e.dataForm,"holderPatch",t)},expression:"dataForm.holderPatch"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"物理区域："}},[o("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.dataForm.holderArea,callback:function(t){e.$set(e.dataForm,"holderArea",t)},expression:"dataForm.holderArea"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"归属工厂：",prop:"factory"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dataForm.factory,callback:function(t){e.$set(e.dataForm,"factory",t)},expression:"dataForm.factory"}},[o("el-option",{attrs:{label:"",value:""}}),e._v(" "),e._l(e.factoryList,function(e,t){return o("el-option",{key:t,attrs:{label:e.deptName,value:e.deptId}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"归属车间：",prop:"deptId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dataForm.deptId,callback:function(t){e.$set(e.dataForm,"deptId",t)},expression:"dataForm.deptId"}},[o("el-option",{attrs:{label:"",value:""}}),e._v(" "),e._l(e.workshop,function(e,t){return o("el-option",{key:t,attrs:{label:e.deptName,value:e.deptId}})})],2)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.dataFormSubmit}},[e._v("确定")])],1)])},staticRenderFns:[]};var d=o("C7Lr")(i,s,!1,function(e){o("/P8M")},"data-v-3cd75173",null);t.default=d.exports},cC4D:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("P9l9"),a={name:"ContainerManage",data:function(){return{visible:!1,form:{},factoryList:[],workshop:[],currPage:1,pageSize:10,totalCount:0,multipleSelection:[],dictList:[],list:[]}},mounted:function(){this.GetContainerList(),this.getDictList(),this.getFactoryList()},methods:{indexMethod:function(e){return e+1+(1*this.currPage-1)*(1*this.pageSize)},GetContainerList:function(e){var t=this;e||(e={type:"holder_type",pageSize:this.pageSize,currPage:this.currPage}),this.$http(""+r.c.CONTAINERLIST1_API,"POST",e).then(function(e){var o=e.data;0===o.code?(t.multipleSelection=[],t.list=o.page.list,t.currPage=o.page.currPage,t.pageSize=o.page.pageSize,t.totalCount=o.page.totalCount):t.$message.error(o.msg),t.visible=!1})},getDictList:function(){var e=this;this.$http(r.k.PARAMETERLIST_API+"?type=holder_type","POST").then(function(t){var o=t.data;0===o.code?e.dictList=o.dicList:e.$message.error(o.msg)})},getFactoryList:function(){var e=this;this.$http(r.c.FINDORG_API+"?code=factory","POST",{},!1,!1,!1).then(function(t){0===t.data.code?e.factoryList=t.data.typeList:e.$message.error(t.data.msg)})},Getdeptcode:function(e){var t=this;e&&(this.$set(this.form,"deptId",""),this.$http(""+r.c.FINDORGBYID_API,"POST",{deptId:e}).then(function(e){var o=e.data;0===o.code?t.workshop=o.typeList:t.$message.error(o.msg)}))},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e,o){t.multipleSelection.push(e.holderId)})},qurery:function(e){e&&(this.currPage=1),this.GetContainerList({type:"holder_type",pageSize:this.pageSize,currPage:this.currPage,holder_type:this.form.holderType,holder_no:this.form.holderNo,holder_hold:this.form.holderHold,factory:this.form.factoryId,dept_id:this.form.deptId})},addOrupdate:function(e){var t=this;this.visible=!0,this.$nextTick(function(){t.$refs.addOrupdate.init(e)})},remove:function(){var e=this;0===this.multipleSelection.length?this.$message.error("请选择要删除的容器"):this.$confirm("确认删除容器, 是否继续?","删除容器",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http(""+r.c.CONTAINERDEL_API,"POST",e.multipleSelection).then(function(t){var o=t.data;0===o.code?(e.$message({type:"success",message:"删除成功!"}),e.multipleSelection=[],e.GetContainerList()):e.$message.error(o.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.GetContainerList({type:"holder_type",pageSize:e,currPage:"1",holder_type:this.form.holderType,holder_no:this.form.holderNo,holder_hold:this.form.holderHold,factory:this.form.factoryId,dept_id:this.form.deptId})},handleCurrentChange:function(e){this.GetContainerList({type:"holder_type",holder_type:this.form.holderType,holder_no:this.form.holderNo,holder_hold:this.form.holderHold,dept_id:this.form.deptId,pageSize:this.pageSize,factory:this.form.factoryId,currPage:e})}},watch:{"form.factoryId":function(e){this.Getdeptcode(e)}},computed:{},components:{ConAddorUpdate:o("9M57").default}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.lodingStatus,expression:"lodingStatus",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[o("div",{staticClass:"main"},[o("el-card",[o("h3",[e._v("容器管理列表")]),e._v(" "),o("el-row",{attrs:{type:"flex"}},[o("el-col",[o("el-form",{staticClass:"topforms1",attrs:{inline:!0,model:e.form,size:"small","label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.qurery()},submit:function(e){e.preventDefault()}}},[o("el-form-item",{attrs:{label:"容器类型："}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.holderType,callback:function(t){e.$set(e.form,"holderType",t)},expression:"form.holderType"}},[o("el-option",{attrs:{label:"",value:""}}),e._v(" "),e._l(e.dictList,function(e,t){return o("el-option",{key:t,attrs:{label:e.value,value:e.code}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"容器号："}},[o("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.form.holderNo,callback:function(t){e.$set(e.form,"holderNo",t)},expression:"form.holderNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"容器量："}},[o("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.form.holderHold,callback:function(t){e.$set(e.form,"holderHold",t)},expression:"form.holderHold"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"归属工厂："}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.factoryId,callback:function(t){e.$set(e.form,"factoryId",t)},expression:"form.factoryId"}},e._l(e.factoryList,function(e,t){return o("el-option",{key:t,attrs:{label:e.deptName,value:e.deptId}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"归属车间："}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}},e._l(e.workshop,function(e,t){return o("el-option",{key:t,attrs:{label:e.deptName,value:e.deptId}})}),1)],1)],1)],1),e._v(" "),o("el-col",{staticStyle:{width:"320px"}},[e.isAuth("sys:holder:checkList")?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.qurery(!0)}}},[e._v("查询")]):e._e(),e._v(" "),e.isAuth("sys:holder:save")?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addOrupdate()}}},[e._v("新增")]):e._e(),e._v(" "),e.isAuth("sys:holder:delete")?o("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.remove}},[e._v("批量删除")]):e._e()],1)],1),e._v(" "),o("el-row",[o("el-table",{ref:"table1",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{"header-row-class-name":"tableHead",data:e.list,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"34"}}),e._v(" "),o("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"typeName",label:"容器类型","show-overflow-tooltip":!0,width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"holderNo",label:"容器号","show-overflow-tooltip":!0,width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"holderName","show-overflow-tooltip":!0,label:"容器描述"}}),e._v(" "),o("el-table-column",{attrs:{prop:"holderHold",label:"容器量","show-overflow-tooltip":!0,width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"holderPatch",label:"批数","show-overflow-tooltip":!0,width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"holderArea",label:"物理区域","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"factoryName",label:"归属工厂","show-overflow-tooltip":!0,width:"92"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deptName",label:"归属车间","show-overflow-tooltip":!0,width:"92"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作","header-align":"left",align:"left",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAuth("sys:holder:delete")&&e.isAuth("sys:holder:findById")?o("el-button",{staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(o){return e.addOrupdate(t.row.holderId)}}},[e._v("编辑")]):e._e()]}}])})],1)],1),e._v(" "),o("el-row",[o("el-pagination",{attrs:{"current-page":e.currPage,"page-sizes":[10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),e.visible?o("con-addor-update",{ref:"addOrupdate",on:{refreshDataList:e.GetContainerList}}):e._e()],1)},staticRenderFns:[]};var i=o("C7Lr")(a,l,!1,function(e){o("mOBW"),o("911z")},"data-v-14ffdf18",null);t.default=i.exports},mOBW:function(e,t){}});
//# sourceMappingURL=22.8eedabf42019191fa48d.js.map