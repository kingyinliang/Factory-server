{"version":3,"sources":["webpack:///src/views/page/BasicData/CapacityManage/CapacityManage.vue","webpack:///./src/views/page/BasicData/CapacityManage/CapacityManage.vue?7460","webpack:///./src/views/page/BasicData/CapacityManage/CapacityManage.vue","webpack:///src/views/page/BasicData/CapacityManage/CapacityAddOrUpdate.vue","webpack:///./src/views/page/BasicData/CapacityManage/CapacityAddOrUpdate.vue?cf62","webpack:///./src/views/page/BasicData/CapacityManage/CapacityAddOrUpdate.vue"],"names":["CapacityManage","name","data","loginstatus","visible","capacity","SerchSapList","deptId","OrgTree","CapacityList","arrList","multipleSelection","totalCount","currPage","pageSize","mounted","_this","this","getTree","$http","api","FINDSAP_API","params","then","_ref","code","list","$message","error","msg","methods","_this2","ORGSTRUCTURE_API","_ref2","deptList","children","GetList","st","_this3","CAPALIST_API","materialCode","stringify_default","_ref3","page","handleSelectionChange","val","_this4","forEach","item","index","push","id","addOrupdate","_this5","$nextTick","$refs","capaaddupdate","init","remove","_this6","length","$confirm","confirmButtonText","cancelButtonText","type","CAPADEL_API","_ref4","console","log","message","catch","indexMethod","handleSizeChange","handleCurrentChange","computed","components","CapacityAddOrUpdate","CapacityManage_CapacityManage","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","modifiers","fullscreen","lock","attrs","element-loading-text","staticClass","staticStyle","float","inline","model","size","label-width","nativeOn","keyup","$event","indexOf","_k","keyCode","key","placeholder","suffix-icon","callback","$$v","$set","_v","isAuth","on","click","_e","gutter","span","slot","node-key","default-expanded-keys","expand-on-click-node","node-click","margin","ref","width","margin-bottom","header-row-class-name","border","tooltip-effect","selection-change","label","prop","show-overflow-tooltip","scopedSlots","_u","fn","scope","_s","row","materialName","padding","current-page","page-sizes","page-size","layout","total","size-change","current-change","refreshDataList","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Unit","CapacityId","dataForm","material","standardOfMan","basicCapacity","basicCapacityUnit","changer","changed","dataRule","required","trigger","props","GetUnit","PARAMETERLIST_API","dicList","JSON","parse","dataFormSubmit","validate","valid","substring","CAPAADDORUPDATE_API","duration","onClose","$emit","submitType","CapacityManage_CapacityAddOrUpdate","title","close-on-click-modal","update:visible","status-icon","rules","filterable","disabled","_l","sapCode","itemName"],"mappings":"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","file":"static/js/26.bfb5392f1e1cbffc9cfe.js","sourcesContent":["<template>\r\n  <el-col v-loading.fullscreen.lock=\"loginstatus\" element-loading-text=\"加载中\">\r\n    <div class=\"main\">\r\n      <el-card>\r\n        <el-row class=\"clearfix\">\r\n          <div style=\"float: right\">\r\n            <el-form :inline=\"true\" :model=\"capacity\" size=\"small\" label-width=\"68px\" class=\"topforms2\" @keyup.enter.native=\"GetList()\">\r\n              <el-form-item>\r\n                <el-input v-model=\"capacity.capacity\" placeholder=\"物料\" suffix-icon=\"el-icon-search\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"GetList(false,true)\" v-if=\"isAuth('sys:capacity:listCapa')\">查询</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </el-row>\r\n        <el-row type=\"flex\" :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-card>\r\n              <div slot=\"header\" class=\"clearfix\">\r\n                <span>组织架构</span>\r\n              </div>\r\n              <el-tree :data=\"OrgTree\" node-key=\"deptId\" :default-expanded-keys=\"arrList\" @node-click=\"GetList\" :expand-on-click-node=\"false\"></el-tree>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col :span=\"16\" v-if=\"isAuth('sys:capacity:listCapa')\">\r\n            <el-card>\r\n              <div slot=\"header\" class=\"clearfix\">\r\n                <span>产能信息</span>\r\n              </div>\r\n              <div>\r\n                <el-button type=\"danger\" @click=\"remove()\" style=\"float: right;margin:0 20px 20px 0\" size=\"small\" v-if=\"isAuth('sys:capacity:deleteCapa')\">批量删除</el-button>\r\n                <el-button type=\"primary\" @click=\"addOrupdate()\" style=\"float: right;margin:0 20px 20px 0\" size=\"small\" v-if=\"isAuth('sys:capacity:saveOrUpdateCapa')\">增加</el-button>\r\n              </div>\r\n              <el-table\r\n                ref=\"table1\"\r\n                :data=\"CapacityList\"\r\n                @selection-change=\"handleSelectionChange\"\r\n                header-row-class-name=\"tableHead\"\r\n                border\r\n                tooltip-effect=\"dark\"\r\n                style=\"width: 100%;margin-bottom: 20px\">\r\n                <el-table-column\r\n                  type=\"selection\"\r\n                  width=\"34\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  type=\"index\"\r\n                  label=\"序号\"\r\n                  :index=\"indexMethod\"\r\n                  width=\"55\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"workNum\"\r\n                  :show-overflow-tooltip=\"true\"\r\n                  label=\"物料\">\r\n                  <template slot-scope=\"scope\">\r\n                    {{scope.row.materialCode + ' ' + scope.row.materialName}}\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"basicCapacity\"\r\n                  label=\"标准产能\"\r\n                  :show-overflow-tooltip=\"true\"\r\n                  width=\"87\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"basicCapacityUnitName\"\r\n                  label=\"单位\"\r\n                  width=\"50\"\r\n                  :show-overflow-tooltip=\"true\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"standardOfMan\"\r\n                  label=\"标配人力\"\r\n                  width=\"80\"\r\n                  :show-overflow-tooltip=\"true\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"changer\"\r\n                  label=\"操作人\"\r\n                  width=\"87\"\r\n                  :show-overflow-tooltip=\"true\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"changed\"\r\n                  label=\"操作时间\"\r\n                  width=\"120\"\r\n                  :show-overflow-tooltip=\"true\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  label=\"操作\"\r\n                  width=\"50\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button style=\"padding: 0;\" type=\"text\" @click=\"addOrupdate(scope.row)\" v-if=\"isAuth('sys:capacity:saveOrUpdateCapa')\">编辑</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <el-row >\r\n                <el-pagination\r\n                  @size-change=\"handleSizeChange\"\r\n                  @current-change=\"handleCurrentChange\"\r\n                  :current-page=\"currPage\"\r\n                  :page-sizes=\"[10, 15, 20]\"\r\n                  :page-size=\"pageSize\"\r\n                  layout=\"total, sizes, prev, pager, next, jumper\"\r\n                  :total=\"totalCount\">\r\n                </el-pagination>\r\n              </el-row>\r\n            </el-card>\r\n          </el-col>\r\n        </el-row>\r\n      </el-card>\r\n    </div>\r\n    <capacity-add-or-update v-if=\"visible\" :SerchSapList=\"SerchSapList\" ref=\"capaaddupdate\" @refreshDataList=\"GetList\"></capacity-add-or-update>\r\n  </el-col>\r\n</template>\r\n\r\n<script>\r\nimport {BASICDATA_API} from '@/api/api'\r\nimport CapacityAddOrUpdate from './CapacityAddOrUpdate'\r\nexport default {\r\n  name: 'CapacityManage',\r\n  data () {\r\n    return {\r\n      loginstatus: false,\r\n      visible: false,\r\n      capacity: {\r\n        capacity: ''\r\n      },\r\n      SerchSapList: [],\r\n      deptId: '',\r\n      OrgTree: [],\r\n      CapacityList: [],\r\n      arrList: [],\r\n      multipleSelection: [],\r\n      totalCount: 1,\r\n      currPage: 1,\r\n      pageSize: 10\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getTree()\r\n    this.$http(`${BASICDATA_API.FINDSAP_API}`, 'POST', {params: ''}, false, false, false).then(({data}) => {\r\n      if (data.code === 0) {\r\n        this.SerchSapList = data.list\r\n      } else {\r\n        this.$message.error(data.msg)\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    // 获取组织结构树\r\n    getTree () {\r\n      this.$http(`${BASICDATA_API.ORGSTRUCTURE_API}`, 'GET', {}).then(({data}) => {\r\n        if (data.code === 0) {\r\n          this.OrgTree = data.deptList\r\n          this.arrList = [this.OrgTree[0].children[0].deptId]\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      })\r\n    },\r\n    // 获取产能列表\r\n    GetList (data, st) {\r\n      this.loginstatus = true\r\n      if (data) {\r\n        this.deptId = data.deptId\r\n      }\r\n      if (st) {\r\n        this.currPage = 1\r\n      }\r\n      this.$http(`${BASICDATA_API.CAPALIST_API}`, 'POST', {\r\n        deptId: this.deptId,\r\n        materialCode: this.capacity.capacity,\r\n        currPage: JSON.stringify(this.currPage),\r\n        pageSize: JSON.stringify(this.pageSize)\r\n      }).then(({data}) => {\r\n        if (data.code === 0) {\r\n          this.multipleSelection = []\r\n          this.CapacityList = data.page.list\r\n          this.currPage = data.page.currPage\r\n          this.pageSize = data.page.pageSize\r\n          this.totalCount = data.page.totalCount\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n        this.visible = false\r\n        this.loginstatus = false\r\n      })\r\n    },\r\n    // 表格选中\r\n    handleSelectionChange (val) {\r\n      this.multipleSelection = []\r\n      val.forEach((item, index) => {\r\n        this.multipleSelection.push(item.id)\r\n      })\r\n    },\r\n    // 新增  修改\r\n    addOrupdate (data) {\r\n      if (this.deptId) {\r\n        this.visible = true\r\n        this.$nextTick(() => {\r\n          this.$refs.capaaddupdate.init(this.deptId, data)\r\n        })\r\n      } else {\r\n        this.$message.error('请先选择部门')\r\n      }\r\n    },\r\n    // 删除\r\n    remove () {\r\n      if (this.multipleSelection.length === 0) {\r\n        this.$message.error('请选择要删除的产能')\r\n      } else {\r\n        this.$confirm('确认删除该物料产能, 是否继续?', '删除产能', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$http(`${BASICDATA_API.CAPADEL_API}`, 'POST', this.multipleSelection).then(({data}) => {\r\n            console.log(data)\r\n            if (data.code === 0) {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功!'\r\n              })\r\n              this.multipleSelection = []\r\n              this.GetList()\r\n            } else {\r\n              this.$message.error(data.msg)\r\n            }\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n      }\r\n    },\r\n    // 序号\r\n    indexMethod (index) {\r\n      return index + 1 + (this.currPage * 1 - 1) * (this.pageSize * 1)\r\n    },\r\n    // 改变每页条数\r\n    handleSizeChange (val) {\r\n      this.pageSize = val\r\n      this.GetList()\r\n    },\r\n    // 跳转页数\r\n    handleCurrentChange (val) {\r\n      this.currPage = val\r\n      this.GetList()\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {\r\n    CapacityAddOrUpdate\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/page/BasicData/CapacityManage/CapacityManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-col',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.loginstatus),expression:\"loginstatus\",modifiers:{\"fullscreen\":true,\"lock\":true}}],attrs:{\"element-loading-text\":\"加载中\"}},[_c('div',{staticClass:\"main\"},[_c('el-card',[_c('el-row',{staticClass:\"clearfix\"},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('el-form',{staticClass:\"topforms2\",attrs:{\"inline\":true,\"model\":_vm.capacity,\"size\":\"small\",\"label-width\":\"68px\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.GetList()}}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"物料\",\"suffix-icon\":\"el-icon-search\"},model:{value:(_vm.capacity.capacity),callback:function ($$v) {_vm.$set(_vm.capacity, \"capacity\", $$v)},expression:\"capacity.capacity\"}})],1),_vm._v(\" \"),_c('el-form-item',[(_vm.isAuth('sys:capacity:listCapa'))?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.GetList(false,true)}}},[_vm._v(\"查询\")]):_vm._e()],1)],1)],1)]),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"组织架构\")])]),_vm._v(\" \"),_c('el-tree',{attrs:{\"data\":_vm.OrgTree,\"node-key\":\"deptId\",\"default-expanded-keys\":_vm.arrList,\"expand-on-click-node\":false},on:{\"node-click\":_vm.GetList}})],1)],1),_vm._v(\" \"),(_vm.isAuth('sys:capacity:listCapa'))?_c('el-col',{attrs:{\"span\":16}},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"产能信息\")])]),_vm._v(\" \"),_c('div',[(_vm.isAuth('sys:capacity:deleteCapa'))?_c('el-button',{staticStyle:{\"float\":\"right\",\"margin\":\"0 20px 20px 0\"},attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.remove()}}},[_vm._v(\"批量删除\")]):_vm._e(),_vm._v(\" \"),(_vm.isAuth('sys:capacity:saveOrUpdateCapa'))?_c('el-button',{staticStyle:{\"float\":\"right\",\"margin\":\"0 20px 20px 0\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.addOrupdate()}}},[_vm._v(\"增加\")]):_vm._e()],1),_vm._v(\" \"),_c('el-table',{ref:\"table1\",staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"20px\"},attrs:{\"data\":_vm.CapacityList,\"header-row-class-name\":\"tableHead\",\"border\":\"\",\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"34\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"index\":_vm.indexMethod,\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"workNum\",\"show-overflow-tooltip\":true,\"label\":\"物料\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                  \"+_vm._s(scope.row.materialCode + ' ' + scope.row.materialName)+\"\\n                \")]}}],null,false,2762302903)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"basicCapacity\",\"label\":\"标准产能\",\"show-overflow-tooltip\":true,\"width\":\"87\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"basicCapacityUnitName\",\"label\":\"单位\",\"width\":\"50\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"standardOfMan\",\"label\":\"标配人力\",\"width\":\"80\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"changer\",\"label\":\"操作人\",\"width\":\"87\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"changed\",\"label\":\"操作时间\",\"width\":\"120\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"50\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.isAuth('sys:capacity:saveOrUpdateCapa'))?_c('el-button',{staticStyle:{\"padding\":\"0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.addOrupdate(scope.row)}}},[_vm._v(\"编辑\")]):_vm._e()]}}],null,false,710922592)})],1),_vm._v(\" \"),_c('el-row',[_c('el-pagination',{attrs:{\"current-page\":_vm.currPage,\"page-sizes\":[10, 15, 20],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totalCount},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1):_vm._e()],1)],1)],1),_vm._v(\" \"),(_vm.visible)?_c('capacity-add-or-update',{ref:\"capaaddupdate\",attrs:{\"SerchSapList\":_vm.SerchSapList},on:{\"refreshDataList\":_vm.GetList}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-b44136f6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/page/BasicData/CapacityManage/CapacityManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b44136f6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./CapacityManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CapacityManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CapacityManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b44136f6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./CapacityManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b44136f6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/page/BasicData/CapacityManage/CapacityManage.vue\n// module id = null\n// module chunks = ","<template>\r\n  <el-dialog\r\n    :title=\"CapacityId?'修改产能信息':'新增产能'\"\r\n    :close-on-click-modal=\"false\"\r\n    :visible.sync=\"visible\">\r\n    <div>\r\n      <el-form :model=\"dataForm\" status-icon :rules=\"dataRule\" ref=\"dataForm\"  @keyup.enter.native=\"dataFormSubmit()\" label-width=\"100px\">\r\n        <el-form-item label=\"物料：\" prop=\"material\">\r\n          <el-select v-model=\"dataForm.material\" filterable placeholder=\"请选择\" v-if=\"!CapacityId\">\r\n            <el-option\r\n              v-for=\"item in SerchSapList\"\r\n              :key=\"item.sapCode+' '+item.itemName\"\r\n              :label=\"item.sapCode+' '+item.itemName\"\r\n              :value=\"item.sapCode+' '+item.itemName\">\r\n            </el-option>\r\n          </el-select>\r\n          <el-select v-model=\"dataForm.material\" filterable placeholder=\"请选择\" disabled v-else>\r\n            <el-option\r\n              v-for=\"item in SerchSapList\"\r\n              :key=\"item.sapCode+' '+item.itemName\"\r\n              :label=\"item.sapCode+' '+item.itemName\"\r\n              :value=\"item.sapCode+' '+item.itemName\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"标准产能：\" prop=\"basicCapacity\">\r\n          <el-input v-model=\"dataForm.basicCapacity\" placeholder=\"手动输入\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"单位：\" prop=\"basicCapacityUnit\">\r\n          <el-select v-model=\"dataForm.basicCapacityUnit\" filterable placeholder=\"请选择\">\r\n            <el-option v-for=\"item in Unit\" :key=\"item.code\" :label=\"item.value\" :value=\"item.code\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"标配人力：\" prop=\"standardOfMan\">\r\n          <el-input v-model=\"dataForm.standardOfMan\" placeholder=\"手动输入\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"维护人：\" v-if=\"CapacityId\">\r\n          <el-input v-model=\"dataForm.changer\" placeholder=\"手动输入\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"维护时间：\" v-if=\"CapacityId\">\r\n          <el-date-picker type=\"datetime\"  v-model=\"dataForm.changed\" placeholder=\"选择\" disabled></el-date-picker>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"visible = false\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"dataFormSubmit\">确定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {BASICDATA_API, SYSTEMSETUP_API} from '@/api/api'\r\nexport default {\r\n  name: 'CapacityAddOrUpdate',\r\n  data () {\r\n    return {\r\n      Unit: [],\r\n      CapacityId: '',\r\n      deptId: '',\r\n      visible: false,\r\n      dataForm: {\r\n        material: '',\r\n        standardOfMan: '',\r\n        basicCapacity: 0,\r\n        basicCapacityUnit: '',\r\n        changer: '',\r\n        changed: ''\r\n      },\r\n      dataRule: {\r\n        material: [\r\n          { required: true, message: '物料不能为空', trigger: 'blur' }\r\n        ],\r\n        basicCapacity: [\r\n          { required: true, message: '产能不能为空', trigger: 'blur' }\r\n        ],\r\n        standardOfMan: [\r\n          { required: true, message: '标配人力不能为空', trigger: 'blur' }\r\n        ],\r\n        basicCapacityUnit: [\r\n          { required: true, message: '单位不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    SerchSapList: {}\r\n  },\r\n  mounted () {\r\n    this.GetUnit()\r\n  },\r\n  methods: {\r\n    // 获取单位下拉\r\n    GetUnit () {\r\n      this.$http(`${SYSTEMSETUP_API.PARAMETERLIST_API}?type=UNIT`, 'POST').then(({data}) => {\r\n        if (data.code === 0) {\r\n          this.Unit = data.dicList\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      })\r\n    },\r\n    init (deptId, data) {\r\n      this.deptId = deptId\r\n      if (data) {\r\n        this.CapacityId = data.id\r\n        this.dataForm = JSON.parse(JSON.stringify(data))\r\n        this.dataForm.material = data.materialCode + ' ' + data.materialName\r\n      } else {\r\n        this.CapacityId = ''\r\n        this.dataForm = {}\r\n        this.dataForm.deptId = deptId\r\n      }\r\n      this.visible = true\r\n    },\r\n    dataFormSubmit () {\r\n      this.$refs.dataForm.validate((valid) => {\r\n        if (valid) {\r\n          this.dataForm.materialCode = this.dataForm.material.substring(0, this.dataForm.material.indexOf(' '))\r\n          this.dataForm.materialName = this.dataForm.material.substring(this.dataForm.material.indexOf(' ') + 1)\r\n          this.$http(`${BASICDATA_API.CAPAADDORUPDATE_API}`, 'POST', this.dataForm).then(({data}) => {\r\n            if (data.code === 0) {\r\n              this.$message({\r\n                message: '操作成功',\r\n                type: 'success',\r\n                duration: 1500,\r\n                onClose: () => {\r\n                  this.visible = false\r\n                  this.$emit('refreshDataList')\r\n                }\r\n              })\r\n            } else {\r\n              this.submitType = true\r\n              this.$message.error(data.msg)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .el-select {\r\n    display: block;\r\n    position: relative;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/page/BasicData/CapacityManage/CapacityAddOrUpdate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.CapacityId?'修改产能信息':'新增产能',\"close-on-click-modal\":false,\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.dataForm,\"status-icon\":\"\",\"rules\":_vm.dataRule,\"label-width\":\"100px\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.dataFormSubmit()}}},[_c('el-form-item',{attrs:{\"label\":\"物料：\",\"prop\":\"material\"}},[(!_vm.CapacityId)?_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.dataForm.material),callback:function ($$v) {_vm.$set(_vm.dataForm, \"material\", $$v)},expression:\"dataForm.material\"}},_vm._l((_vm.SerchSapList),function(item){return _c('el-option',{key:item.sapCode+' '+item.itemName,attrs:{\"label\":item.sapCode+' '+item.itemName,\"value\":item.sapCode+' '+item.itemName}})}),1):_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\",\"disabled\":\"\"},model:{value:(_vm.dataForm.material),callback:function ($$v) {_vm.$set(_vm.dataForm, \"material\", $$v)},expression:\"dataForm.material\"}},_vm._l((_vm.SerchSapList),function(item){return _c('el-option',{key:item.sapCode+' '+item.itemName,attrs:{\"label\":item.sapCode+' '+item.itemName,\"value\":item.sapCode+' '+item.itemName}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"标准产能：\",\"prop\":\"basicCapacity\"}},[_c('el-input',{attrs:{\"placeholder\":\"手动输入\"},model:{value:(_vm.dataForm.basicCapacity),callback:function ($$v) {_vm.$set(_vm.dataForm, \"basicCapacity\", $$v)},expression:\"dataForm.basicCapacity\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"单位：\",\"prop\":\"basicCapacityUnit\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.dataForm.basicCapacityUnit),callback:function ($$v) {_vm.$set(_vm.dataForm, \"basicCapacityUnit\", $$v)},expression:\"dataForm.basicCapacityUnit\"}},_vm._l((_vm.Unit),function(item){return _c('el-option',{key:item.code,attrs:{\"label\":item.value,\"value\":item.code}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"标配人力：\",\"prop\":\"standardOfMan\"}},[_c('el-input',{attrs:{\"placeholder\":\"手动输入\"},model:{value:(_vm.dataForm.standardOfMan),callback:function ($$v) {_vm.$set(_vm.dataForm, \"standardOfMan\", $$v)},expression:\"dataForm.standardOfMan\"}})],1),_vm._v(\" \"),(_vm.CapacityId)?_c('el-form-item',{attrs:{\"label\":\"维护人：\"}},[_c('el-input',{attrs:{\"placeholder\":\"手动输入\",\"disabled\":\"\"},model:{value:(_vm.dataForm.changer),callback:function ($$v) {_vm.$set(_vm.dataForm, \"changer\", $$v)},expression:\"dataForm.changer\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.CapacityId)?_c('el-form-item',{attrs:{\"label\":\"维护时间：\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"选择\",\"disabled\":\"\"},model:{value:(_vm.dataForm.changed),callback:function ($$v) {_vm.$set(_vm.dataForm, \"changed\", $$v)},expression:\"dataForm.changed\"}})],1):_vm._e()],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.dataFormSubmit}},[_vm._v(\"确定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-54e7bbea\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/page/BasicData/CapacityManage/CapacityAddOrUpdate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54e7bbea\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./CapacityAddOrUpdate.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CapacityAddOrUpdate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CapacityAddOrUpdate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54e7bbea\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./CapacityAddOrUpdate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-54e7bbea\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/page/BasicData/CapacityManage/CapacityAddOrUpdate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}