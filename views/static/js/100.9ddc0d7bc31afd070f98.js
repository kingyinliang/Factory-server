webpackJsonp([100],{ci6j:function(a,t){},wTnO:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("mvHQ"),r=e.n(i),l=e("P9l9"),o={name:"CapacityAddOrUpdate",data:function(){return{Unit:[],CapacityId:"",deptId:"",visible:!1,dataForm:{material:"",standardOfMan:"",basicCapacity:0,basicCapacityUnit:"",changer:"",changed:""},dataRule:{material:[{required:!0,message:"物料不能为空",trigger:"blur"}],basicCapacity:[{required:!0,message:"产能不能为空",trigger:"blur"}],standardOfMan:[{required:!0,message:"标配人力不能为空",trigger:"blur"}],basicCapacityUnit:[{required:!0,message:"单位不能为空",trigger:"blur"}]}}},props:{SerchSapList:{}},mounted:function(){this.GetUnit()},methods:{GetUnit:function(){var a=this;this.$http(l.k.PARAMETERLIST_API+"?type=UNIT","POST").then(function(t){var e=t.data;0===e.code?a.Unit=e.dicList:a.$message.error(e.msg)})},init:function(a,t){this.deptId=a,t?(this.CapacityId=t.id,this.dataForm=JSON.parse(r()(t)),this.dataForm.material=t.materialCode+" "+t.materialName):(this.CapacityId="",this.dataForm={},this.dataForm.deptId=a),this.visible=!0},dataFormSubmit:function(){var a=this;this.$refs.dataForm.validate(function(t){t&&(a.dataForm.materialCode=a.dataForm.material.substring(0,a.dataForm.material.indexOf(" ")),a.dataForm.materialName=a.dataForm.material.substring(a.dataForm.material.indexOf(" ")+1),a.$http(""+l.c.CAPAADDORUPDATE_API,"POST",a.dataForm).then(function(t){var e=t.data;0===e.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.visible=!1,a.$emit("refreshDataList")}}):(a.submitType=!0,a.$message.error(e.msg))}))})}},computed:{},components:{}},s={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("el-dialog",{attrs:{title:a.CapacityId?"修改产能信息":"新增产能","close-on-click-modal":!1,visible:a.visible},on:{"update:visible":function(t){a.visible=t}}},[e("div",[e("el-form",{ref:"dataForm",attrs:{model:a.dataForm,"status-icon":"",rules:a.dataRule,"label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.dataFormSubmit()}}},[e("el-form-item",{attrs:{label:"物料：",prop:"material"}},[a.CapacityId?e("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:""},model:{value:a.dataForm.material,callback:function(t){a.$set(a.dataForm,"material",t)},expression:"dataForm.material"}},a._l(a.SerchSapList,function(a){return e("el-option",{key:a.sapCode+" "+a.itemName,attrs:{label:a.sapCode+" "+a.itemName,value:a.sapCode+" "+a.itemName}})}),1):e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:a.dataForm.material,callback:function(t){a.$set(a.dataForm,"material",t)},expression:"dataForm.material"}},a._l(a.SerchSapList,function(a){return e("el-option",{key:a.sapCode+" "+a.itemName,attrs:{label:a.sapCode+" "+a.itemName,value:a.sapCode+" "+a.itemName}})}),1)],1),a._v(" "),e("el-form-item",{attrs:{label:"标准产能：",prop:"basicCapacity"}},[e("el-input",{attrs:{placeholder:"手动输入"},model:{value:a.dataForm.basicCapacity,callback:function(t){a.$set(a.dataForm,"basicCapacity",t)},expression:"dataForm.basicCapacity"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"单位：",prop:"basicCapacityUnit"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:a.dataForm.basicCapacityUnit,callback:function(t){a.$set(a.dataForm,"basicCapacityUnit",t)},expression:"dataForm.basicCapacityUnit"}},a._l(a.Unit,function(a){return e("el-option",{key:a.code,attrs:{label:a.value,value:a.code}})}),1)],1),a._v(" "),e("el-form-item",{attrs:{label:"标配人力：",prop:"standardOfMan"}},[e("el-input",{attrs:{placeholder:"手动输入"},model:{value:a.dataForm.standardOfMan,callback:function(t){a.$set(a.dataForm,"standardOfMan",t)},expression:"dataForm.standardOfMan"}})],1),a._v(" "),a.CapacityId?e("el-form-item",{attrs:{label:"维护人："}},[e("el-input",{attrs:{placeholder:"手动输入",disabled:""},model:{value:a.dataForm.changer,callback:function(t){a.$set(a.dataForm,"changer",t)},expression:"dataForm.changer"}})],1):a._e(),a._v(" "),a.CapacityId?e("el-form-item",{attrs:{label:"维护时间："}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"选择",disabled:""},model:{value:a.dataForm.changed,callback:function(t){a.$set(a.dataForm,"changed",t)},expression:"dataForm.changed"}})],1):a._e()],1)],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.visible=!1}}},[a._v("取消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.dataFormSubmit}},[a._v("确定")])],1)])},staticRenderFns:[]};var d=e("C7Lr")(o,s,!1,function(a){e("ci6j")},"data-v-54e7bbea",null);t.default=d.exports}});
//# sourceMappingURL=100.9ddc0d7bc31afd070f98.js.map