{"version":3,"sources":["webpack:///src/views/page/BasicData/DeviceManage/DeviceManage.vue","webpack:///./src/views/page/BasicData/DeviceManage/DeviceManage.vue?f2c6","webpack:///./src/views/page/BasicData/DeviceManage/DeviceManage.vue","webpack:///src/views/page/BasicData/DeviceManage/DeviceAddorUpdate.vue","webpack:///./src/views/page/BasicData/DeviceManage/DeviceAddorUpdate.vue?0032","webpack:///./src/views/page/BasicData/DeviceManage/DeviceAddorUpdate.vue"],"names":["DeviceManage","name","data","arrList","deptId","visible","OrgTree","param","deviceList","multipleSelection","totalCount","currPage","pageSize","mounted","this","getTree","methods","_this","$http","api","ORGSTRUCTURE_API","then","_ref","console","log","code","deptList","children","$message","error","msg","setdetail","getList","st","_this2","DEVICELIST1_API","stringify_default","_ref2","list","handleSelectionChange","val","_this3","forEach","item","index","push","deviceId","indexMethod","addOrupdate","id","_this4","$nextTick","$refs","init","remove","_this5","length","$confirm","confirmButtonText","cancelButtonText","type","DEVICEDEL_API","_ref3","message","catch","handleSizeChange","handleCurrentChange","computed","components","AddOrupdate","DeviceManage_DeviceManage","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","modifiers","fullscreen","lock","attrs","element-loading-text","staticClass","staticStyle","float","inline","model","size","label-width","nativeOn","keyup","$event","indexOf","_k","keyCode","key","submit","preventDefault","placeholder","suffix-icon","callback","$$v","$set","_v","isAuth","on","click","_e","gutter","span","slot","node-key","default-expanded-keys","expand-on-click-node","node-click","margin-bottom","margin-right","ref","width","border","header-row-class-name","tooltip-effect","selection-change","label","prop","show-overflow-tooltip","fixed","scopedSlots","_u","fn","scope","row","current-page","page-sizes","page-size","layout","total","size-change","current-change","refreshDataList","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","DeviceAddorUpdate","form","deviceName","deviceNo","submitType","submitForm","DEVICEUPDATE_API","duration","onClose","$emit","DEVICEADD_API","DeviceManage_DeviceAddorUpdate","title","close-on-click-modal","update:visible"],"mappings":"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","file":"static/js/27.ac17000de1e8edf3e77d.js","sourcesContent":["<template>\r\n  <el-col v-loading.fullscreen.lock=\"lodingStatus\" element-loading-text=\"加载中\">\r\n    <!--<div class=\"topTitle\">-->\r\n      <!--<el-breadcrumb separator=\"/\">-->\r\n        <!--<el-breadcrumb-item>基础数据</el-breadcrumb-item>-->\r\n        <!--<el-breadcrumb-item>设备管理</el-breadcrumb-item>-->\r\n      <!--</el-breadcrumb>-->\r\n    <!--</div>-->\r\n    <div class=\"main\">\r\n      <el-card>\r\n        <el-row class=\"clearfix\">\r\n          <div style=\"float: right\">\r\n            <el-form :inline=\"true\" :model=\"param\" size=\"small\" label-width=\"68px\" class=\"topforms2\" @keyup.enter.native=\"getList(true)\" @submit.native.prevent>\r\n              <el-form-item>\r\n                <el-input v-model=\"param.param\" placeholder=\"设备编号\" suffix-icon=\"el-icon-search\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"getList(true)\" v-if=\"isAuth('sys:device:checkList')\">查询</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </el-row>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-card class=\"orgcard\">\r\n              <div slot=\"header\" class=\"clearfix\">\r\n                <span>组织架构一览</span>\r\n              </div>\r\n              <el-tree :data=\"OrgTree\" node-key=\"deptId\" :default-expanded-keys=\"arrList\" @node-click=\"setdetail\" :expand-on-click-node=\"false\"></el-tree>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col :span=\"16\">\r\n            <el-card class=\"orgcard\">\r\n              <div slot=\"header\" class=\"clearfix\">\r\n                <span>设备管理</span>\r\n              </div>\r\n              <div>\r\n                <el-button type=\"danger\" size=\"small\" @click=\"remove()\" style=\"float: right;margin-bottom: 20px\"  v-if=\"isAuth('sys:device:delete')\">批量删除</el-button>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"addOrupdate(deptId)\" v-if=\"isAuth('sys:device:save')\" style=\"float: right;margin-bottom: 20px;margin-right: 10px\">新增</el-button>\r\n                <el-table\r\n                  ref=\"table1\"\r\n                  border\r\n                  header-row-class-name=\"tableHead\"\r\n                  :data=\"deviceList\"\r\n                  @selection-change=\"handleSelectionChange\"\r\n                  tooltip-effect=\"dark\"\r\n                  style=\"width: 100%;margin-bottom: 20px\">\r\n                  <el-table-column\r\n                    type=\"selection\"\r\n                    width=\"34\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                    type=\"index\"\r\n                    :index=\"indexMethod\"\r\n                    label=\"序号\"\r\n                    width=\"55\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                    prop=\"deviceNo\"\r\n                    width=\"120\"\r\n                    :show-overflow-tooltip=\"true\"\r\n                    label=\"设备编号\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                    prop=\"deviceName\"\r\n                    label=\"设备描述\"\r\n                    :show-overflow-tooltip=\"true\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                    fixed=\"right\"\r\n                    label=\"操作\"\r\n                    width=\"65\">\r\n                    <template slot-scope=\"scope\">\r\n                      <el-button type=\"text\" @click=\"addOrupdate(deptId, scope.row)\" v-if=\"isAuth('sys:device:update')\">编辑</el-button>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n              </div>\r\n              <el-row >\r\n                <el-pagination\r\n                  @size-change=\"handleSizeChange\"\r\n                  @current-change=\"handleCurrentChange\"\r\n                  :current-page=\"currPage\"\r\n                  :page-sizes=\"[10, 15, 20]\"\r\n                  :page-size=\"pageSize\"\r\n                  layout=\"total, sizes, prev, pager, next, jumper\"\r\n                  :total=\"totalCount\">\r\n                </el-pagination>\r\n              </el-row>\r\n            </el-card>\r\n          </el-col>\r\n        </el-row>\r\n      </el-card>\r\n    </div>\r\n    <add-orupdate v-if=\"visible\" ref=\"addOrupdate\" @refreshDataList=\"getList()\"></add-orupdate>\r\n  </el-col>\r\n</template>\r\n\r\n<script>\r\nimport {BASICDATA_API} from '@/api/api'\r\nimport AddOrupdate from './DeviceAddorUpdate'\r\nexport default {\r\n  name: 'DeviceManage',\r\n  data () {\r\n    return {\r\n      arrList: [],\r\n      deptId: 0,\r\n      visible: false,\r\n      OrgTree: [],\r\n      param: {\r\n        param: ''\r\n      },\r\n      deviceList: [],\r\n      multipleSelection: [],\r\n      totalCount: 0,\r\n      currPage: 1,\r\n      pageSize: 10\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getTree()\r\n  },\r\n  methods: {\r\n    // 获取组织结构树\r\n    getTree () {\r\n      this.$http(`${BASICDATA_API.ORGSTRUCTURE_API}`, 'GET', {}).then(({data}) => {\r\n        console.log(data)\r\n        if (data.code === 0) {\r\n          this.OrgTree = data.deptList\r\n          this.arrList = [this.OrgTree[0].children[0].deptId]\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n      })\r\n    },\r\n    // 获取设备列表\r\n    setdetail (data) {\r\n      this.deptId = data.deptId\r\n      this.getList()\r\n    },\r\n    // 获取列表\r\n    getList (st) {\r\n      if (st) {\r\n        this.currPage = 1\r\n      }\r\n      this.$http(`${BASICDATA_API.DEVICELIST1_API}`, 'POST', {\r\n        param: this.param.param,\r\n        deptId: this.deptId,\r\n        currPage: JSON.stringify(this.currPage),\r\n        pageSize: JSON.stringify(this.pageSize)\r\n      }).then(({data}) => {\r\n        this.visible = false\r\n        if (data.code === 0) {\r\n          this.deviceList = data.list.list\r\n          this.pageSize = data.list.pageSize\r\n          this.totalCount = data.list.totalCount\r\n          this.currPage = data.list.currPage\r\n        } else {\r\n          this.$message.error(data.msg)\r\n        }\r\n        this.multipleSelection = []\r\n      })\r\n    },\r\n    // 表格选中\r\n    handleSelectionChange (val) {\r\n      this.multipleSelection = []\r\n      val.forEach((item, index) => {\r\n        this.multipleSelection.push(item.deviceId)\r\n      })\r\n    },\r\n    // 序号\r\n    indexMethod (index) {\r\n      return index + 1 + (this.currPage * 1 - 1) * (this.pageSize * 1)\r\n    },\r\n    // 添加和编辑\r\n    addOrupdate (deptId, id) {\r\n      if (deptId === 0) {\r\n        this.$message.error('请选择部门后新增')\r\n      } else {\r\n        this.visible = true\r\n        this.$nextTick(() => {\r\n          this.$refs.addOrupdate.init(deptId, id)\r\n        })\r\n      }\r\n    },\r\n    // 删除\r\n    remove () {\r\n      if (this.multipleSelection.length === 0) {\r\n        this.$message.error('请选择要删除的设备')\r\n      } else {\r\n        this.$confirm('确认删除设备, 是否继续?', '删除设备', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$http(`${BASICDATA_API.DEVICEDEL_API}`, 'POST', this.multipleSelection).then(({data}) => {\r\n            console.log(data)\r\n            if (data.code === 0) {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功!'\r\n              })\r\n              this.multipleSelection = []\r\n              this.getList()\r\n            } else {\r\n              this.$message.error(data.msg)\r\n            }\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n      }\r\n    },\r\n    // 改变每页条数\r\n    handleSizeChange (val) {\r\n      this.pageSize = val\r\n      this.getList()\r\n    },\r\n    // 跳转页数\r\n    handleCurrentChange (val) {\r\n      this.currPage = val\r\n      this.getList()\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {\r\n    AddOrupdate\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.el-table-column--selection .cell { padding-right: 0 !important; }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/page/BasicData/DeviceManage/DeviceManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-col',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.lodingStatus),expression:\"lodingStatus\",modifiers:{\"fullscreen\":true,\"lock\":true}}],attrs:{\"element-loading-text\":\"加载中\"}},[_c('div',{staticClass:\"main\"},[_c('el-card',[_c('el-row',{staticClass:\"clearfix\"},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('el-form',{staticClass:\"topforms2\",attrs:{\"inline\":true,\"model\":_vm.param,\"size\":\"small\",\"label-width\":\"68px\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getList(true)},\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"设备编号\",\"suffix-icon\":\"el-icon-search\"},model:{value:(_vm.param.param),callback:function ($$v) {_vm.$set(_vm.param, \"param\", $$v)},expression:\"param.param\"}})],1),_vm._v(\" \"),_c('el-form-item',[(_vm.isAuth('sys:device:checkList'))?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.getList(true)}}},[_vm._v(\"查询\")]):_vm._e()],1)],1)],1)]),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-card',{staticClass:\"orgcard\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"组织架构一览\")])]),_vm._v(\" \"),_c('el-tree',{attrs:{\"data\":_vm.OrgTree,\"node-key\":\"deptId\",\"default-expanded-keys\":_vm.arrList,\"expand-on-click-node\":false},on:{\"node-click\":_vm.setdetail}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":16}},[_c('el-card',{staticClass:\"orgcard\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"设备管理\")])]),_vm._v(\" \"),_c('div',[(_vm.isAuth('sys:device:delete'))?_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-bottom\":\"20px\"},attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.remove()}}},[_vm._v(\"批量删除\")]):_vm._e(),_vm._v(\" \"),(_vm.isAuth('sys:device:save'))?_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-bottom\":\"20px\",\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.addOrupdate(_vm.deptId)}}},[_vm._v(\"新增\")]):_vm._e(),_vm._v(\" \"),_c('el-table',{ref:\"table1\",staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"20px\"},attrs:{\"border\":\"\",\"header-row-class-name\":\"tableHead\",\"data\":_vm.deviceList,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"34\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"type\":\"index\",\"index\":_vm.indexMethod,\"label\":\"序号\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"deviceNo\",\"width\":\"120\",\"show-overflow-tooltip\":true,\"label\":\"设备编号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"deviceName\",\"label\":\"设备描述\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"65\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.isAuth('sys:device:update'))?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.addOrupdate(_vm.deptId, scope.row)}}},[_vm._v(\"编辑\")]):_vm._e()]}}])})],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-pagination',{attrs:{\"current-page\":_vm.currPage,\"page-sizes\":[10, 15, 20],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totalCount},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1)],1)],1)],1),_vm._v(\" \"),(_vm.visible)?_c('add-orupdate',{ref:\"addOrupdate\",on:{\"refreshDataList\":function($event){return _vm.getList()}}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5992c10e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/page/BasicData/DeviceManage/DeviceManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5992c10e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./DeviceManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./DeviceManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./DeviceManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5992c10e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./DeviceManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/page/BasicData/DeviceManage/DeviceManage.vue\n// module id = null\n// module chunks = ","<template>\r\n  <el-dialog\r\n    :title=\"form.deviceId?'修改设备信息':'新增设备'\"\r\n    :close-on-click-modal=\"false\"\r\n    :visible.sync=\"visible\">\r\n    <div>\r\n      <el-form :model=\"form\" size=\"small\" label-width=\"110px\" class=\"devicedialog\" @keyup.enter.native=\"submitForm()\">\r\n        <el-form-item label=\"设备编号：\">\r\n          <el-input v-model=\"form.deviceNo\" placeholder=\"手工录入\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"设备描述：\">\r\n          <el-input v-model=\"form.deviceName\" placeholder=\"手工录入\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"visible = false\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {BASICDATA_API} from '@/api/api'\r\nexport default {\r\n  name: 'DeviceAddorUpdate',\r\n  data () {\r\n    return {\r\n      id: '',\r\n      visible: false,\r\n      form: {\r\n        deviceName: '',\r\n        deviceNo: ''\r\n      },\r\n      submitType: true\r\n    }\r\n  },\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    init (deptId, id) {\r\n      this.visible = true\r\n      this.form = {}\r\n      if (id) {\r\n        this.form = id\r\n        this.id = id.deviceId\r\n      }\r\n      this.form.deptId = deptId\r\n    },\r\n    // 提交订单\r\n    submitForm () {\r\n      if (this.submitType) {\r\n        this.submitType = false\r\n        if (this.id) {\r\n          this.$http(`${BASICDATA_API.DEVICEUPDATE_API}`, 'POST', this.form).then(({data}) => {\r\n            console.log(data)\r\n            if (data.code === 0) {\r\n              this.$message({\r\n                message: '操作成功',\r\n                type: 'success',\r\n                duration: 1500,\r\n                onClose: () => {\r\n                  this.submitType = true\r\n                  this.visible = false\r\n                  this.$emit('refreshDataList')\r\n                }\r\n              })\r\n            } else {\r\n              this.submitType = true\r\n              this.$message.error(data.msg)\r\n            }\r\n          })\r\n        } else {\r\n          this.$http(`${BASICDATA_API.DEVICEADD_API}`, 'POST', this.form).then(({data}) => {\r\n            console.log(data)\r\n            if (data.code === 0) {\r\n              this.$message({\r\n                message: '操作成功',\r\n                type: 'success',\r\n                duration: 1500,\r\n                onClose: () => {\r\n                  this.submitType = true\r\n                  this.visible = false\r\n                  this.$emit('refreshDataList')\r\n                }\r\n              })\r\n            } else {\r\n              this.submitType = true\r\n              this.$message.error(data.msg)\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/page/BasicData/DeviceManage/DeviceAddorUpdate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.form.deviceId?'修改设备信息':'新增设备',\"close-on-click-modal\":false,\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',[_c('el-form',{staticClass:\"devicedialog\",attrs:{\"model\":_vm.form,\"size\":\"small\",\"label-width\":\"110px\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitForm()}}},[_c('el-form-item',{attrs:{\"label\":\"设备编号：\"}},[_c('el-input',{attrs:{\"placeholder\":\"手工录入\"},model:{value:(_vm.form.deviceNo),callback:function ($$v) {_vm.$set(_vm.form, \"deviceNo\", $$v)},expression:\"form.deviceNo\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"设备描述：\"}},[_c('el-input',{attrs:{\"placeholder\":\"手工录入\"},model:{value:(_vm.form.deviceName),callback:function ($$v) {_vm.$set(_vm.form, \"deviceName\", $$v)},expression:\"form.deviceName\"}})],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-445ad732\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/page/BasicData/DeviceManage/DeviceAddorUpdate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-445ad732\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./DeviceAddorUpdate.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./DeviceAddorUpdate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./DeviceAddorUpdate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-445ad732\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./DeviceAddorUpdate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-445ad732\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/page/BasicData/DeviceManage/DeviceAddorUpdate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}