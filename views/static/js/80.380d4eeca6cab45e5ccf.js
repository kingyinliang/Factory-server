webpackJsonp([80],{"2Tej":function(e,t){},Of4i:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("P9l9"),i={name:"SpecificationAddOrUpdate",data:function(){return{visible:!1,SpecificationId:"",largeClass:[],Unit:[],dataForm:{material:"",brand:"",largeClass:"",boxSpec:"",boxSpecUnit:"",productSpec:"",productSpecUnit:""},dataRule:{material:[{required:!0,message:"物料不能为空",trigger:"blur"}],brand:[{required:!0,message:"品牌不能为空",trigger:"blur"}],largeClass:[{required:!0,message:"大类不能为空",trigger:"blur"}],boxSpec:[{required:!0,message:"箱规格不能为空",trigger:"blur"}],boxSpecUnit:[{required:!0,message:"箱规格单位不能为空",trigger:"blur"}]}}},props:{SerchSapList:{}},mounted:function(){this.GetLargeClass(),this.GetUnit()},methods:{setBrand:function(e){this.dataForm.brand=e.split(" ")[2]},GetLargeClass:function(){var e=this;this.$http(r.k.PARAMETERLIST_API+"?type=category","POST").then(function(t){var a=t.data;0===a.code?e.largeClass=a.dicList:e.$message.error(a.msg)})},GetUnit:function(){var e=this;this.$http(r.k.PARAMETERLIST_API+"?type=spe_unit","POST").then(function(t){var a=t.data;0===a.code?e.Unit=a.dicList:e.$message.error(a.msg)})},init:function(e){e?(this.SpecificationId=e.id,this.dataForm.id=e.id,this.dataForm.material=e.materialCode+" "+e.materialName,this.dataForm.brand=e.brand,this.dataForm.largeClass=e.largeClass,this.dataForm.boxSpec=e.boxSpec,this.dataForm.boxSpecUnit=e.boxSpecUnit,this.dataForm.productSpec=e.productSpec,this.dataForm.productSpecUnit=e.productSpecUnit,this.dataForm.changer=e.changer):(this.SpecificationId="",this.dataForm={},this.dataForm.boxSpecUnit="001",this.dataForm.productSpecUnit="002"),this.visible=!0},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&(e.dataForm.materialCode=e.dataForm.material.split(" ")[0],e.dataForm.materialName=e.dataForm.material.split(" ")[1],e.dataForm.brand=e.dataForm.material.split(" ")[2],e.$http(""+(e.SpecificationId?r.c.SPECUPDATE_API:r.c.SPECSAVE_API),"POST",e.dataForm).then(function(t){var a=t.data;0===a.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.submitType=!0,e.visible=!1,e.$emit("refreshDataList")}}):(e.submitType=!0,e.$message.error(a.msg))}))})}},computed:{},components:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.SpecificationId?"修改规格信息":"新增规格","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("div",[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"status-icon":"",rules:e.dataRule,"label-width":"100px",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"物料：",prop:"material"}},[e.SpecificationId?a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",disabled:""},on:{change:e.setBrand},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}},e._l(e.SerchSapList,function(e){return a("el-option",{key:e.sapCode+" "+e.itemName+" "+e.kondm,attrs:{label:e.sapCode+" "+e.itemName+" "+e.kondm,value:e.sapCode+" "+e.itemName+" "+e.kondm}})}),1):a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:e.setBrand},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}},e._l(e.SerchSapList,function(e){return a("el-option",{key:e.sapCode+" "+e.itemName+" "+e.kondm,attrs:{label:e.sapCode+" "+e.itemName+" "+e.kondm,value:e.sapCode+" "+e.itemName+" "+e.kondm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌：",prop:"brand"}},[a("el-input",{attrs:{placeholder:"请先选择物料",disabled:""},model:{value:e.dataForm.brand,callback:function(t){e.$set(e.dataForm,"brand",t)},expression:"dataForm.brand"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"大类：",prop:"largeClass"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.dataForm.largeClass,callback:function(t){e.$set(e.dataForm,"largeClass",t)},expression:"dataForm.largeClass"}},e._l(e.largeClass,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"箱规格：",prop:"boxSpec"}},[a("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.dataForm.boxSpec,callback:function(t){e.$set(e.dataForm,"boxSpec",t)},expression:"dataForm.boxSpec"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位：",prop:"boxSpecUnit"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.dataForm.boxSpecUnit,callback:function(t){e.$set(e.dataForm,"boxSpecUnit",t)},expression:"dataForm.boxSpecUnit"}},e._l(e.Unit,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"瓶规格："}},[a("el-input",{attrs:{placeholder:"手动输入"},model:{value:e.dataForm.productSpec,callback:function(t){e.$set(e.dataForm,"productSpec",t)},expression:"dataForm.productSpec"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.dataForm.productSpecUnit,callback:function(t){e.$set(e.dataForm,"productSpecUnit",t)},expression:"dataForm.productSpecUnit"}},e._l(e.Unit,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),e.SpecificationId?a("el-form-item",{attrs:{label:"维护人："}},[a("el-input",{attrs:{placeholder:"手动输入",disabled:""},model:{value:e.dataForm.changer,callback:function(t){e.$set(e.dataForm,"changer",t)},expression:"dataForm.changer"}})],1):e._e()],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dataFormSubmit}},[e._v("确定")])],1)])},staticRenderFns:[]};var l=a("C7Lr")(i,o,!1,function(e){a("2Tej")},"data-v-a4379286",null);t.default=l.exports}});
//# sourceMappingURL=80.380d4eeca6cab45e5ccf.js.map