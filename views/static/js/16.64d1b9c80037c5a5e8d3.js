webpackJsonp([16,46],{"0hwB":function(e,t){},EFzW:function(e,t){},UAss:function(e,t){},avXW:function(e,t){},cj45:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),l=a.n(i),s=a("P9l9"),n={name:"SuppliesManage",data:function(){return{loading:!1,visible:!1,sapTime:{},form:{param:""},currPage:1,pageSize:10,totalCount:0,saplist:[]}},mounted:function(){this.Getsaplist()},methods:{Getsaplist:function(){var e=this;this.$http(""+s.c.SAPLIST_API,"POST",{param:this.form.param,pageSize:l()(this.pageSize),currPage:l()(this.currPage)}).then(function(t){var a=t.data;0===a.code?(e.saplist=a.page.list,e.pageSize=a.page.pageSize,e.totalCount=a.page.totalCount,e.currPage=a.page.currPage):e.$message.error(a.msg)})},showdetail:function(e){var t=this;this.visible=!0,this.$nextTick(function(){t.$refs.sapDetail.init(e)})},SapuUpdate:function(){var e=this;this.loading=!0,this.$http(""+s.c.SAPUPDATE_API,"GET",{werks:"7100"}).then(function(t){var a=t.data;0===a.code?e.sapTime=setInterval(function(){e.GetSapuUpdate()},4e3):(e.loading=!1,e.$message.error(a.msg))})},GetSapuUpdate:function(){var e=this;this.$http(""+s.c.GETSAPUPDATE_API,"GET").then(function(t){var a=t.data;0===a.code?a.asyncRecord&&("0"===a.asyncRecord.asyncStatus?(e.loading=!1,clearInterval(e.sapTime),e.$message.error("同步失败")):"1"===a.asyncRecord.asyncStatus&&(e.loading=!1,clearInterval(e.sapTime),e.$message.success("同步成功"),e.Getsaplist())):(e.loading=!1,clearInterval(e.sapTime),e.$message.error(a.msg))}).catch(function(){e.loading=!1,clearInterval(e.sapTime)})},querys:function(e){e&&(this.currPage=1),this.Getsaplist()},handleSizeChange:function(e){this.pageSize=e,this.Getsaplist()},handleCurrentChange:function(e){this.currPage=e,this.Getsaplist()}},computed:{},components:{SapDetail:a("uCDR").default}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.lodingStatus,expression:"lodingStatus",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"main"},[a("el-card",[a("div",{staticClass:"clearfix"},[a("el-row",{staticStyle:{float:"right"}},[a("el-form",{staticClass:"topforms2",attrs:{inline:!0,model:e.form,size:"small","label-width":"68px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querys(!0)},submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"物料/物料类型","suffix-icon":"el-icon-search"},model:{value:e.form.param,callback:function(t){e.$set(e.form,"param",t)},expression:"form.param"}})],1),e._v(" "),a("el-form-item",[e.isAuth("sys:sapMaterial:list")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.querys(!0)}}},[e._v("查询")]):e._e(),e._v(" "),e.isAuth("sys:sapMaterial:syncMaterialManual")?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.SapuUpdate}},[e._v("同步")]):e._e()],1)],1)],1)],1),e._v(" "),a("el-row",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"正在同步中"}},[a("el-table",{ref:"table1",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{"header-row-class-name":"tableHead",data:e.saplist,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"物料"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:function(a){return e.showdetail(t.row.materialId)}}},[e._v(e._s(t.row.materialCode)+" "+e._s(t.row.materialName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"工厂",width:"180",prop:"factoryName"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"物料类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.materialTypeCode)+"\n              "+e._s(t.row.materialTypeName)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"basicUnit",label:"基本单位","show-overflow-tooltip":!0,width:"79"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productUnit",label:"生产单位","show-overflow-tooltip":!0,width:"79"}}),e._v(" "),a("el-table-column",{attrs:{prop:"syncDate",label:"同步日期",width:"100"}})],1)],1),e._v(" "),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currPage,"page-sizes":[10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),e.visible?a("sap-detail",{ref:"sapDetail"}):e._e()],1)},staticRenderFns:[]};var r=a("C7Lr")(n,o,!1,function(e){a("avXW"),a("UAss")},"data-v-a31a8608",null);t.default=r.exports},uCDR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("P9l9"),l={name:"SuppliesDetail",data:function(){return{visible:!1,detailDialog:{}}},mounted:function(){},methods:{init:function(e){var t=this;this.$http(i.c.SAPDETAIL_API+"/"+e,"GET",{}).then(function(e){var a=e.data;console.log(a),0===a.code?t.detailDialog=a.sapMaterialItemEntity:t.$message.error(a.msg)}).then(function(){t.visible=!0})}},computed:{},components:{}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"sapdetail",attrs:{title:"物料详情","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{attrs:{inline:!0,model:e.detailDialog,size:"small","label-width":"124px"}},[a("div",{staticClass:"title"},[a("p",[e._v("基础信息：")])]),e._v(" "),a("el-form-item",{attrs:{label:"SAP编码："}},[a("span",[e._v(e._s(e.detailDialog.sapCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"物料描述："}},[a("span",[e._v(e._s(e.detailDialog.itemName))])]),e._v(" "),a("el-form-item",{attrs:{label:"物料类型："}},[a("span",[e._v(e._s(e.detailDialog.itemType))])]),e._v(" "),a("el-form-item",{attrs:{label:"基本单位："}},[a("span",[e._v(e._s(e.detailDialog.itemBasicUnit))])]),e._v(" "),a("el-form-item",{attrs:{label:"物料组："}},[a("span",[e._v(e._s(e.detailDialog.itemGroup))])]),e._v(" "),a("el-form-item",{attrs:{label:"跨公司冻结状态："}},[a("span",[e._v(e._s(e.detailDialog.crossLockStatus))])]),e._v(" "),a("div",{staticClass:"title"},[a("p",[e._v("生产信息：")])]),e._v(" "),a("el-form-item",{attrs:{label:"生产单位："}},[a("span",[e._v(e._s(e.detailDialog.itemProductUnit))])]),e._v(" "),a("el-form-item",{attrs:{label:"换算比例："}},[a("span",[e._v(e._s(e.detailDialog.ratio))])]),e._v(" "),a("div",{staticClass:"title"},[a("p",[e._v("生产信息：")])]),e._v(" "),a("el-form-item",{attrs:{label:"工厂："}},[a("span",[e._v(e._s(e.detailDialog.factory))])]),e._v(" "),a("el-form-item",{attrs:{label:"工厂冻结状态："}},[a("span",[e._v(e._s(e.detailDialog.facLockStatus))])])],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(l,s,!1,function(e){a("0hwB"),a("EFzW")},"data-v-5969b6d7",null);t.default=n.exports}});
//# sourceMappingURL=16.64d1b9c80037c5a5e8d3.js.map