webpackJsonp([96],{v7jv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("P9l9"),r=a("Lna1"),o={name:"craftControl",data:function(){return{visible:!1,CraftControlDate:{saltWaterUsed:"0",windSpeedUnit:"R/min"},userlist:[]}},props:{isRedact:{},formHeader:{}},mounted:function(){},methods:{GetTechList:function(t){var e=this;this.$http(""+l.d.OUTTECHLIST_API,"POST",{orderHouseId:t.id}).then(function(t){var a=t.data;if(0===a.code){e.CraftControlDate=a.list[0]?a.list[0]:{saltWaterUsed:"0",windSpeedUnit:"R/min"};var l=e.CraftControlDate.status?e.CraftControlDate.status:"";e.$emit("GetCraftControlStatus",l)}else e.$message.error(a.msg)})},SavedCraftControl:function(t){var e=this;if("submit"===t&&!this.TechRul())return!1;this.CraftControlDate.status?"saved"===this.CraftControlDate.status?this.CraftControlDate.status=t:"noPass"===this.CraftControlDate.status&&"submit"===t&&(this.CraftControlDate.status=t):this.CraftControlDate.status=t,this.CraftControlDate.orderHouseId=this.formHeader.id,this.$http(""+l.d.OUTTECHSAVE_API,"POST",[this.CraftControlDate]).then(function(a){var l=a.data;0===l.code?"saved"===t?(e.GetTechList(e.formHeader),e.$message.success("保存成功")):"submit"===t&&(e.GetTechList(e.formHeader),e.$message.success("提交成功")):e.$message.error(l.msg)})},TechRul:function(){var t=!0,e=this.CraftControlDate.windSpeedOne||this.CraftControlDate.windSpeedTwo||this.CraftControlDate.windSpeedThree||this.CraftControlDate.windSpeedFour||this.CraftControlDate.windSpeedFive,a=this.CraftControlDate.blendTempOne||this.CraftControlDate.blendTempTwo||this.CraftControlDate.blendTempThree||this.CraftControlDate.blendTempFour||this.CraftControlDate.blendTempFive,l=this.CraftControlDate.outTempOne||this.CraftControlDate.outTempTwo||this.CraftControlDate.outTempThree||this.CraftControlDate.outTempFour||this.CraftControlDate.outTempFive||this.CraftControlDate.outTempSix||this.CraftControlDate.outTempSeven||this.CraftControlDate.outTempEight||this.CraftControlDate.outTempNine||this.CraftControlDate.outTempTen;return e?a?l?(e&&a&&l&&this.CraftControlDate.operator&&this.CraftControlDate.outStartTime&&this.CraftControlDate.outEndTime&&this.CraftControlDate.saltWaterTemp&&this.CraftControlDate.saltWaterNd||(t=!1,this.$message.error("工艺控制必填项未填")),this.CraftControlDate.kojoMakingTime<36&&!this.CraftControlDate.exceptionDescription&&(t=!1,this.visible=!0),t):(t=!1,this.$message.error("工艺控制出曲品温必填项未填"),!1):(t=!1,this.$message.error("工艺控制混合料温度必填项未填"),!1):(t=!1,this.$message.error("工艺控制风速必填项未填"),!1)},selectUser:function(t){var e=this;this.$http(""+l.k.USERLIST_API,"POST",{deptId:t,param:"",currPage:"1",pageSize:"1000"}).then(function(t){var a=t.data;0===a.code?e.userlist=a.page.list:e.$message.error(a.msg)})}},computed:{kojoMakingTime:function(){return this.CraftControlDate.outStartTime&&this.formHeader.inEndTime?((Object(r.k)(this.CraftControlDate.outStartTime).getTime()-Object(r.k)(this.formHeader.inEndTime).getTime())/36e5).toFixed(2):"0"}},components:{}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"clearfix",staticStyle:{"margin-bottom":"10px"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small",disabled:"submit"===t.CraftControlDate.status},on:{click:function(e){return t.SavedCraftControl("submit")}}},[t._v("提交")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary",size:"small",disabled:"submit"===t.CraftControlDate.status},on:{click:function(e){return t.SavedCraftControl("saved")}}},[t._v("保存")])],1),t._v(" "),a("el-form",{staticClass:"topform",attrs:{inline:!0,model:t.CraftControlDate,size:"small","label-width":"82px"}},[a("el-form-item",{attrs:{label:"出曲开始时间：","label-width":"125px"}},[a("el-date-picker",{staticStyle:{width:"184px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy.MM.dd HH:mm",placeholder:"选择",disabled:!("submit"!==t.CraftControlDate.status)},model:{value:t.CraftControlDate.outStartTime,callback:function(e){t.$set(t.CraftControlDate,"outStartTime",e)},expression:"CraftControlDate.outStartTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"出曲结束时间：","label-width":"125px"}},[a("el-date-picker",{staticStyle:{width:"184px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy.MM.dd HH:mm",placeholder:"选择",disabled:!("submit"!==t.CraftControlDate.status)},model:{value:t.CraftControlDate.outEndTime,callback:function(e){t.$set(t.CraftControlDate,"outEndTime",e)},expression:"CraftControlDate.outEndTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"制曲时间：","label-width":"125px"}},[a("p",{staticStyle:{"min-width":"184px"}},[t._v(t._s(t.CraftControlDate.kojoMakingTime=t.kojoMakingTime)+" H")])]),t._v(" "),a("el-form-item",{attrs:{label:"盐水用量：","label-width":"125px"}},[a("el-input",{attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.saltWaterUsed,callback:function(e){t.$set(t.CraftControlDate,"saltWaterUsed",e)},expression:"CraftControlDate.saltWaterUsed"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"盐水温度：","label-width":"125px"}},[a("el-input",{attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.saltWaterTemp,callback:function(e){t.$set(t.CraftControlDate,"saltWaterTemp",e)},expression:"CraftControlDate.saltWaterTemp"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"盐水浓度：","label-width":"125px"}},[a("el-input",{attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.saltWaterNd,callback:function(e){t.$set(t.CraftControlDate,"saltWaterNd",e)},expression:"CraftControlDate.saltWaterNd"}})],1),t._v(" "),a("el-row",[a("el-form-item",{staticClass:"techitem",attrs:{label:"出曲品温：","label-width":"125px"}},[a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.outTempOne,callback:function(e){t.$set(t.CraftControlDate,"outTempOne",e)},expression:"CraftControlDate.outTempOne"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.outTempTwo,callback:function(e){t.$set(t.CraftControlDate,"outTempTwo",e)},expression:"CraftControlDate.outTempTwo"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.outTempThree,callback:function(e){t.$set(t.CraftControlDate,"outTempThree",e)},expression:"CraftControlDate.outTempThree"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.outTempFour,callback:function(e){t.$set(t.CraftControlDate,"outTempFour",e)},expression:"CraftControlDate.outTempFour"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.outTempFive,callback:function(e){t.$set(t.CraftControlDate,"outTempFive",e)},expression:"CraftControlDate.outTempFive"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{staticClass:"techitem",staticStyle:{height:"78px"},attrs:{label:"混合料温度：","label-width":"125px"}},[a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempOne,callback:function(e){t.$set(t.CraftControlDate,"blendTempOne",e)},expression:"CraftControlDate.blendTempOne"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempTwo,callback:function(e){t.$set(t.CraftControlDate,"blendTempTwo",e)},expression:"CraftControlDate.blendTempTwo"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempThree,callback:function(e){t.$set(t.CraftControlDate,"blendTempThree",e)},expression:"CraftControlDate.blendTempThree"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempFour,callback:function(e){t.$set(t.CraftControlDate,"blendTempFour",e)},expression:"CraftControlDate.blendTempFour"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempFive,callback:function(e){t.$set(t.CraftControlDate,"blendTempFive",e)},expression:"CraftControlDate.blendTempFive"}}),t._v(" "),a("p",{staticStyle:{"margin-top":"17px"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempSix,callback:function(e){t.$set(t.CraftControlDate,"blendTempSix",e)},expression:"CraftControlDate.blendTempSix"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempSeven,callback:function(e){t.$set(t.CraftControlDate,"blendTempSeven",e)},expression:"CraftControlDate.blendTempSeven"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempEight,callback:function(e){t.$set(t.CraftControlDate,"blendTempEight",e)},expression:"CraftControlDate.blendTempEight"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempNine,callback:function(e){t.$set(t.CraftControlDate,"blendTempNine",e)},expression:"CraftControlDate.blendTempNine"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.blendTempTen,callback:function(e){t.$set(t.CraftControlDate,"blendTempTen",e)},expression:"CraftControlDate.blendTempTen"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{staticClass:"techitem",attrs:{label:"风速：","label-width":"125px"}},[a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.windSpeedOne,callback:function(e){t.$set(t.CraftControlDate,"windSpeedOne",e)},expression:"CraftControlDate.windSpeedOne"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.windSpeedTwo,callback:function(e){t.$set(t.CraftControlDate,"windSpeedTwo",e)},expression:"CraftControlDate.windSpeedTwo"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.windSpeedThree,callback:function(e){t.$set(t.CraftControlDate,"windSpeedThree",e)},expression:"CraftControlDate.windSpeedThree"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.windSpeedFour,callback:function(e){t.$set(t.CraftControlDate,"windSpeedFour",e)},expression:"CraftControlDate.windSpeedFour"}}),t._v(" "),a("el-input",{staticStyle:{width:"149px","margin-right":"17px"},attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.windSpeedFive,callback:function(e){t.$set(t.CraftControlDate,"windSpeedFive",e)},expression:"CraftControlDate.windSpeedFive"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"风速单位：","label-width":"120px"}},[a("el-select",{staticStyle:{width:"149px"},attrs:{placeholder:"请选择",disabled:!("submit"!==t.CraftControlDate.status),size:"small"},model:{value:t.CraftControlDate.windSpeedUnit,callback:function(e){t.$set(t.CraftControlDate,"windSpeedUnit",e)},expression:"CraftControlDate.windSpeedUnit"}},[a("el-option",{attrs:{label:"R/min",value:"R/min"}}),t._v(" "),a("el-option",{attrs:{label:"HZ",value:"HZ"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"操作人：","label-width":"120px"}},[a("el-input",{attrs:{disabled:!("submit"!==t.CraftControlDate.status),size:"small",placeholder:"手工录入"},model:{value:t.CraftControlDate.operator,callback:function(e){t.$set(t.CraftControlDate,"operator",e)},expression:"CraftControlDate.operator"}})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"异常说明","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("p",{staticStyle:{"line-height":"42px"}},[t._v("制曲时间小于36小时，请填写异常说明")]),t._v(" "),a("el-input",{staticClass:"textarea",staticStyle:{width:"100%",height:"200px"},attrs:{type:"textarea",rows:6},model:{value:t.CraftControlDate.exceptionDescription,callback:function(e){t.$set(t.CraftControlDate,"exceptionDescription",e)},expression:"CraftControlDate.exceptionDescription"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.SavedCraftControl("submit")}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(o,i,!1,function(t){a("wy2s")},null,null);e.default=s.exports},wy2s:function(t,e){}});
//# sourceMappingURL=96.b5d7d737af0ba0509276.js.map